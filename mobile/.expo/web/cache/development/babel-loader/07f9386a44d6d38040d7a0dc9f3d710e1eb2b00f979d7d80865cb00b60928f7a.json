{"ast":null,"code":"\"use client\";\n\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { useState, useEffect, useRef, useCallback } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport AppState from \"react-native-web/dist/exports/AppState\";\nimport { Text, Button, Card, Snackbar, ActivityIndicator, Badge } from \"react-native-paper\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { Feather } from \"@expo/vector-icons\";\nimport MapView, { Marker, Polyline, PROVIDER_GOOGLE } from \"react-native-maps\";\nimport * as Location from \"expo-location\";\nimport { Audio } from \"expo-av\";\nimport { useAuth } from \"../../contexts/AuthContext\";\nimport { useNetwork } from \"../../contexts/NetworkContext\";\nimport { useWebSocket } from \"../../contexts/WebSocketContext\";\nimport { fetchDeliveryDetails, updateDeliveryStatus, sendTrackingPoint, getDirections, sendDeliveryNotification } from \"../../services/api\";\nimport { formatPrice, formatTime, formatDistance } from \"../../utils/formatters\";\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nvar LOCATION_TRACKING_INTERVAL = 15000;\nvar LOCATION_DISTANCE_FILTER = 10;\nvar CourierTrackDeliveryScreen = function CourierTrackDeliveryScreen(_ref) {\n  var route = _ref.route,\n    navigation = _ref.navigation;\n  var deliveryId = route.params.deliveryId;\n  var _useAuth = useAuth(),\n    user = _useAuth.user;\n  var _useNetwork = useNetwork(),\n    isConnected = _useNetwork.isConnected,\n    isOfflineMode = _useNetwork.isOfflineMode,\n    addPendingUpload = _useNetwork.addPendingUpload;\n  var _useWebSocket = useWebSocket(),\n    sendMessage = _useWebSocket.sendMessage;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    delivery = _useState2[0],\n    setDelivery = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    statusLoading = _useState6[0],\n    setStatusLoading = _useState6[1];\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    currentLocation = _useState8[0],\n    setCurrentLocation = _useState8[1];\n  var _useState9 = useState([]),\n    _useState0 = _slicedToArray(_useState9, 2),\n    routeCoordinates = _useState0[0],\n    setRouteCoordinates = _useState0[1];\n  var _useState1 = useState([]),\n    _useState10 = _slicedToArray(_useState1, 2),\n    trackingHistory = _useState10[0],\n    setTrackingHistory = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    isTracking = _useState12[0],\n    setIsTracking = _useState12[1];\n  var _useState13 = useState(null),\n    _useState14 = _slicedToArray(_useState13, 2),\n    remainingDistance = _useState14[0],\n    setRemainingDistance = _useState14[1];\n  var _useState15 = useState(null),\n    _useState16 = _slicedToArray(_useState15, 2),\n    remainingTime = _useState16[0],\n    setRemainingTime = _useState16[1];\n  var _useState17 = useState(\"\"),\n    _useState18 = _slicedToArray(_useState17, 2),\n    error = _useState18[0],\n    setError = _useState18[1];\n  var _useState19 = useState(false),\n    _useState20 = _slicedToArray(_useState19, 2),\n    snackbarVisible = _useState20[0],\n    setSnackbarVisible = _useState20[1];\n  var _useState21 = useState(false),\n    _useState22 = _slicedToArray(_useState21, 2),\n    locationPermissionDenied = _useState22[0],\n    setLocationPermissionDenied = _useState22[1];\n  var _useState23 = useState(false),\n    _useState24 = _slicedToArray(_useState23, 2),\n    arrivedAtPickup = _useState24[0],\n    setArrivedAtPickup = _useState24[1];\n  var _useState25 = useState(false),\n    _useState26 = _slicedToArray(_useState25, 2),\n    arrivedAtDelivery = _useState26[0],\n    setArrivedAtDelivery = _useState26[1];\n  var _useState27 = useState(false),\n    _useState28 = _slicedToArray(_useState27, 2),\n    showClientInfo = _useState28[0],\n    setShowClientInfo = _useState28[1];\n  var mapRef = useRef(null);\n  var locationSubscription = useRef(null);\n  var trackingInterval = useRef(null);\n  var appStateRef = useRef(AppState.currentState);\n  var soundRef = useRef(null);\n  var startLocationTracking = useCallback(_asyncToGenerator(function* () {\n    try {\n      stopLocationTracking();\n      yield Location.startLocationUpdatesAsync(\"tracking-task\", {\n        accuracy: Location.Accuracy.Balanced,\n        distanceInterval: LOCATION_DISTANCE_FILTER,\n        timeInterval: LOCATION_TRACKING_INTERVAL,\n        foregroundService: {\n          notificationTitle: \"Suivi de livraison\",\n          notificationBody: \"Votre position est partagée avec le client\"\n        }\n      });\n      locationSubscription.current = yield Location.watchPositionAsync({\n        accuracy: Location.Accuracy.Balanced,\n        distanceInterval: LOCATION_DISTANCE_FILTER,\n        timeInterval: LOCATION_TRACKING_INTERVAL\n      }, handleLocationUpdate);\n      trackingInterval.current = setInterval(sendCurrentLocation, LOCATION_TRACKING_INTERVAL);\n      setIsTracking(true);\n    } catch (error) {\n      console.error(\"Error starting location tracking:\", error);\n      setError(\"Erreur lors du démarrage du suivi de localisation\");\n      setSnackbarVisible(true);\n    }\n  }), [handleLocationUpdate, sendCurrentLocation]);\n  var handleAppStateChange = useCallback(function (nextAppState) {\n    if (appStateRef.current.match(/inactive|background/) && nextAppState === \"active\") {\n      if (isTracking) {\n        stopLocationTracking();\n        startLocationTracking();\n      }\n    } else if (nextAppState.match(/inactive|background/) && appStateRef.current === \"active\") {\n      if (Platform.OS === \"ios\") {\n        stopLocationTracking();\n      }\n    }\n    appStateRef.current = nextAppState;\n  }, [isTracking, startLocationTracking]);\n  var loadDeliveryDetails = useCallback(_asyncToGenerator(function* () {\n    try {\n      setLoading(true);\n      var data = yield fetchDeliveryDetails(deliveryId.toString());\n      setDelivery(data);\n      if (data.courier_id !== (user == null ? void 0 : user.id)) {\n        Alert.alert(\"Accès non autorisé\", \"Vous n'êtes pas le coursier assigné à cette livraison.\", [{\n          text: \"Retour\",\n          onPress: function onPress() {\n            return navigation.goBack();\n          }\n        }]);\n        return;\n      }\n      var _yield$Location$reque = yield Location.requestForegroundPermissionsAsync(),\n        status = _yield$Location$reque.status;\n      if (status !== \"granted\") {\n        setLocationPermissionDenied(true);\n        return;\n      }\n      var location = yield Location.getCurrentPositionAsync({\n        accuracy: Location.Accuracy.High\n      });\n      setCurrentLocation(location);\n      if (data.status === \"accepted\") {\n        if (data.pickup_lat && data.pickup_lng) {\n          loadRoute(location.coords.latitude, location.coords.longitude, data.pickup_lat, data.pickup_lng);\n        }\n      } else if (data.status === \"in_progress\") {\n        if (data.pickup_lat && data.pickup_lng && data.delivery_lat && data.delivery_lng) {\n          loadRoute(location.coords.latitude, location.coords.longitude, data.delivery_lat, data.delivery_lng);\n        }\n      }\n      if (data.status === \"accepted\" || data.status === \"in_progress\") {\n        startLocationTracking();\n      }\n    } catch (error) {\n      console.error(\"Error loading delivery details:\", error);\n      setError(\"Erreur lors du chargement des détails de la livraison\");\n      setSnackbarVisible(true);\n    } finally {\n      setLoading(false);\n    }\n  }), [deliveryId, navigation, user, startLocationTracking]);\n  var loadRoute = function () {\n    var _ref4 = _asyncToGenerator(function* (startLat, startLng, endLat, endLng) {\n      try {\n        var directions = yield getDirections(startLat, startLng, endLat, endLng);\n        if (directions && directions.routes && directions.routes.length > 0) {\n          var _route = directions.routes[0];\n          setRouteCoordinates(_route.coordinates);\n          setRemainingDistance(_route.distance);\n          setRemainingTime(_route.duration);\n          if (mapRef.current && _route.coordinates.length > 0) {\n            mapRef.current.fitToCoordinates(_route.coordinates, {\n              edgePadding: {\n                top: 50,\n                right: 50,\n                bottom: 50,\n                left: 50\n              },\n              animated: true\n            });\n          }\n        }\n      } catch (error) {\n        console.error(\"Error loading route:\", error);\n      }\n    });\n    return function loadRoute(_x, _x2, _x3, _x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var stopLocationTracking = function stopLocationTracking() {\n    Location.hasStartedLocationUpdatesAsync(\"tracking-task\").then(function (hasStarted) {\n      if (hasStarted) {\n        Location.stopLocationUpdatesAsync(\"tracking-task\");\n      }\n    });\n    if (locationSubscription.current) {\n      locationSubscription.current.remove();\n      locationSubscription.current = null;\n    }\n    if (trackingInterval.current) {\n      clearInterval(trackingInterval.current);\n      trackingInterval.current = null;\n    }\n    setIsTracking(false);\n  };\n  function handleLocationUpdate(location) {\n    setCurrentLocation(location);\n    updateRouteWithNewLocation(location);\n    checkArrivalStatus(location);\n    var newPoint = {\n      latitude: location.coords.latitude,\n      longitude: location.coords.longitude,\n      timestamp: new Date().toISOString(),\n      accuracy: location.coords.accuracy || 0,\n      speed: location.coords.speed || 0\n    };\n    setTrackingHistory(function (prev) {\n      return [].concat(_toConsumableArray(prev), [newPoint]);\n    });\n  }\n  var updateRouteWithNewLocation = function updateRouteWithNewLocation(location) {\n    if (!delivery) return;\n    if (delivery.status === \"accepted\" && delivery.pickup_lat && delivery.pickup_lng) {\n      loadRoute(location.coords.latitude, location.coords.longitude, delivery.pickup_lat, delivery.pickup_lng);\n    } else if (delivery.status === \"in_progress\" && delivery.delivery_lat && delivery.delivery_lng) {\n      loadRoute(location.coords.latitude, location.coords.longitude, delivery.delivery_lat, delivery.delivery_lng);\n    }\n  };\n  var checkArrivalStatus = function checkArrivalStatus(location) {\n    if (!delivery) return;\n    var ARRIVAL_THRESHOLD = 50;\n    if (delivery.status === \"accepted\" && delivery.pickup_lat && delivery.pickup_lng && !arrivedAtPickup) {\n      var distance = calculateDistance(location.coords.latitude, location.coords.longitude, delivery.pickup_lat, delivery.pickup_lng);\n      if (distance <= ARRIVAL_THRESHOLD) {\n        setArrivedAtPickup(true);\n        playArrivalSound();\n        Alert.alert(\"Arrivée au point de ramassage\", \"Vous êtes arrivé au point de ramassage. Récupérez le colis et commencez la livraison.\", [{\n          text: \"Plus tard\"\n        }, {\n          text: \"Commencer la livraison\",\n          onPress: function onPress() {\n            return updateStatus(\"in_progress\");\n          }\n        }]);\n      }\n    }\n    if (delivery.status === \"in_progress\" && delivery.delivery_lat && delivery.delivery_lng && !arrivedAtDelivery) {\n      var _distance = calculateDistance(location.coords.latitude, location.coords.longitude, delivery.delivery_lat, delivery.delivery_lng);\n      if (_distance <= ARRIVAL_THRESHOLD) {\n        setArrivedAtDelivery(true);\n        playArrivalSound();\n        Alert.alert(\"Arrivée au point de livraison\", \"Vous êtes arrivé à destination. Livrez le colis au client.\", [{\n          text: \"Plus tard\"\n        }, {\n          text: \"Confirmer la livraison\",\n          onPress: function onPress() {\n            return updateStatus(\"delivered\");\n          }\n        }]);\n      }\n    }\n  };\n  var calculateDistance = function calculateDistance(lat1, lon1, lat2, lon2) {\n    var R = 6371;\n    var dLat = deg2rad(lat2 - lat1);\n    var dLon = deg2rad(lon2 - lon1);\n    var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    var distance = R * c * 1000;\n    return distance;\n  };\n  var deg2rad = function deg2rad(deg) {\n    return deg * (Math.PI / 180);\n  };\n  var playArrivalSound = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      try {\n        var _yield$Audio$Sound$cr = yield Audio.Sound.createAsync(require(\"../../assets/sounds/arrival.mp3\")),\n          sound = _yield$Audio$Sound$cr.sound;\n        soundRef.current = sound;\n        yield sound.playAsync();\n      } catch (error) {\n        console.error(\"Error playing sound:\", error);\n      }\n    });\n    return function playArrivalSound() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  function sendCurrentLocation() {\n    return _sendCurrentLocation.apply(this, arguments);\n  }\n  function _sendCurrentLocation() {\n    _sendCurrentLocation = _asyncToGenerator(function* () {\n      if (!currentLocation || !delivery || !isConnected) return;\n      try {\n        var trackingData = {\n          delivery_id: deliveryId,\n          lat: currentLocation.coords.latitude,\n          lng: currentLocation.coords.longitude,\n          accuracy: currentLocation.coords.accuracy || 0,\n          speed: currentLocation.coords.speed || 0,\n          timestamp: new Date().toISOString()\n        };\n        if (isOfflineMode) {\n          addPendingUpload({\n            type: \"tracking\",\n            data: trackingData,\n            retries: 0\n          });\n        } else {\n          yield sendTrackingPoint(trackingData);\n          sendMessage({\n            type: \"tracking_update\",\n            data: {\n              delivery_id: deliveryId,\n              courier_id: user == null ? void 0 : user.id,\n              location: {\n                lat: currentLocation.coords.latitude,\n                lng: currentLocation.coords.longitude,\n                timestamp: new Date().toISOString()\n              }\n            }\n          });\n        }\n      } catch (error) {\n        console.error(\"Error sending tracking point:\", error);\n      }\n    });\n    return _sendCurrentLocation.apply(this, arguments);\n  }\n  var updateStatus = function () {\n    var _ref6 = _asyncToGenerator(function* (status) {\n      if (!delivery) return;\n      try {\n        setStatusLoading(true);\n        if (isOfflineMode && !isConnected) {\n          addPendingUpload({\n            type: \"delivery\",\n            data: {\n              delivery_id: deliveryId,\n              status: status,\n              operation: \"status_update\"\n            },\n            retries: 0\n          });\n          setDelivery(_objectSpread(_objectSpread({}, delivery), {}, {\n            status: status\n          }));\n          Alert.alert(\"Mise à jour enregistrée\", \"Le statut sera mis à jour lorsque vous serez en ligne.\");\n        } else {\n          yield updateDeliveryStatus(deliveryId.toString(), status);\n          setDelivery(_objectSpread(_objectSpread({}, delivery), {}, {\n            status: status\n          }));\n          var message = \"\";\n          if (status === \"in_progress\") {\n            message = \"Le coursier a récupéré votre colis et est en route pour la livraison.\";\n          } else if (status === \"delivered\") {\n            message = \"Votre colis a été livré. Veuillez confirmer la réception.\";\n          }\n          if (message && delivery.user_id) {\n            yield sendDeliveryNotification(delivery.user_id.toString(), {\n              title: \"Mise à jour de votre livraison\",\n              body: message,\n              data: {\n                delivery_id: deliveryId,\n                status: status\n              },\n              type: \"\",\n              message: \"\"\n            });\n          }\n          if (status === \"in_progress\" && currentLocation && delivery.delivery_lat && delivery.delivery_lng) {\n            loadRoute(currentLocation.coords.latitude, currentLocation.coords.longitude, delivery.delivery_lat, delivery.delivery_lng);\n          }\n        }\n      } catch (error) {\n        console.error(\"Error updating delivery status:\", error);\n        setError(\"Erreur lors de la mise à jour du statut\");\n        setSnackbarVisible(true);\n      } finally {\n        setStatusLoading(false);\n      }\n    });\n    return function updateStatus(_x5) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    loadDeliveryDetails();\n    return function () {\n      stopLocationTracking();\n      if (soundRef.current) {\n        soundRef.current.unloadAsync();\n      }\n    };\n  }, [deliveryId, loadDeliveryDetails]);\n  useEffect(function () {\n    var subscription = AppState.addEventListener(\"change\", handleAppStateChange);\n    return function () {\n      subscription.remove();\n    };\n  }, [isTracking, handleAppStateChange]);\n  if (loading || !delivery) {\n    return _jsxs(SafeAreaView, {\n      style: styles.container,\n      children: [_jsxs(View, {\n        style: styles.header,\n        children: [_jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return navigation.goBack();\n          },\n          children: _jsx(Feather, {\n            name: \"arrow-left\",\n            size: 24,\n            color: \"#212121\"\n          })\n        }), _jsx(Text, {\n          style: styles.headerTitle,\n          children: \"Chargement...\"\n        }), _jsx(View, {\n          style: {\n            width: 24\n          }\n        })]\n      }), _jsxs(View, {\n        style: styles.loadingContainer,\n        children: [_jsx(ActivityIndicator, {\n          size: \"large\",\n          color: \"#FF6B00\"\n        }), _jsx(Text, {\n          style: styles.loadingText,\n          children: \"Chargement des d\\xE9tails de la livraison...\"\n        })]\n      })]\n    });\n  }\n  if (locationPermissionDenied) {\n    return _jsxs(SafeAreaView, {\n      style: styles.container,\n      children: [_jsxs(View, {\n        style: styles.header,\n        children: [_jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return navigation.goBack();\n          },\n          children: _jsx(Feather, {\n            name: \"arrow-left\",\n            size: 24,\n            color: \"#212121\"\n          })\n        }), _jsx(Text, {\n          style: styles.headerTitle,\n          children: \"Suivi de livraison\"\n        }), _jsx(View, {\n          style: {\n            width: 24\n          }\n        })]\n      }), _jsxs(View, {\n        style: styles.permissionDeniedContainer,\n        children: [_jsx(Feather, {\n          name: \"map-pin\",\n          size: 64,\n          color: \"#FF6B00\"\n        }), _jsx(Text, {\n          style: styles.permissionDeniedTitle,\n          children: \"Localisation requise\"\n        }), _jsx(Text, {\n          style: styles.permissionDeniedText,\n          children: \"Pour suivre cette livraison, vous devez autoriser l'acc\\xE8s \\xE0 votre position.\"\n        }), _jsx(Button, {\n          mode: \"contained\",\n          onPress: _asyncToGenerator(function* () {\n            var _yield$Location$reque2 = yield Location.requestForegroundPermissionsAsync(),\n              status = _yield$Location$reque2.status;\n            if (status === \"granted\") {\n              setLocationPermissionDenied(false);\n              loadDeliveryDetails();\n            }\n          }),\n          style: styles.permissionButton,\n          children: \"Autoriser la localisation\"\n        })]\n      })]\n    });\n  }\n  return _jsxs(SafeAreaView, {\n    style: styles.container,\n    children: [_jsxs(View, {\n      style: styles.header,\n      children: [_jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return navigation.goBack();\n        },\n        children: _jsx(Feather, {\n          name: \"arrow-left\",\n          size: 24,\n          color: \"#212121\"\n        })\n      }), _jsxs(Text, {\n        style: styles.headerTitle,\n        children: [\"Livraison #\", delivery.id]\n      }), _jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return setShowClientInfo(!showClientInfo);\n        },\n        children: _jsx(Feather, {\n          name: \"info\",\n          size: 24,\n          color: \"#212121\"\n        })\n      })]\n    }), isOfflineMode && _jsxs(View, {\n      style: styles.offlineBanner,\n      children: [_jsx(Feather, {\n        name: \"wifi-off\",\n        size: 16,\n        color: \"#FFFFFF\"\n      }), _jsx(Text, {\n        style: styles.offlineText,\n        children: \"Mode hors ligne\"\n      })]\n    }), _jsxs(View, {\n      style: styles.mapContainer,\n      children: [currentLocation ? _jsxs(MapView, {\n        ref: mapRef,\n        style: styles.map,\n        provider: PROVIDER_GOOGLE,\n        initialRegion: {\n          latitude: currentLocation.coords.latitude,\n          longitude: currentLocation.coords.longitude,\n          latitudeDelta: 0.01,\n          longitudeDelta: 0.01\n        },\n        showsUserLocation: true,\n        showsMyLocationButton: true,\n        showsCompass: true,\n        showsTraffic: true,\n        children: [delivery.pickup_lat && delivery.pickup_lng && _jsx(Marker, {\n          coordinate: {\n            latitude: delivery.pickup_lat,\n            longitude: delivery.pickup_lng\n          },\n          title: \"Point de ramassage\",\n          description: delivery.pickup_address,\n          pinColor: \"#FF6B00\"\n        }), delivery.delivery_lat && delivery.delivery_lng && _jsx(Marker, {\n          coordinate: {\n            latitude: delivery.delivery_lat,\n            longitude: delivery.delivery_lng\n          },\n          title: \"Point de livraison\",\n          description: delivery.delivery_address,\n          pinColor: \"#4CAF50\"\n        }), routeCoordinates.length > 0 && _jsx(Polyline, {\n          coordinates: routeCoordinates,\n          strokeWidth: 4,\n          strokeColor: \"#4285F4\"\n        }), trackingHistory.length > 1 && _jsx(Polyline, {\n          coordinates: trackingHistory.map(function (point) {\n            return {\n              latitude: point.latitude,\n              longitude: point.longitude\n            };\n          }),\n          strokeWidth: 3,\n          strokeColor: \"#FF6B00\",\n          lineDashPattern: [0, 4, 8]\n        })]\n      }) : _jsxs(View, {\n        style: styles.mapPlaceholder,\n        children: [_jsx(ActivityIndicator, {\n          size: \"large\",\n          color: \"#FF6B00\"\n        }), _jsx(Text, {\n          style: styles.mapPlaceholderText,\n          children: \"Chargement de la carte...\"\n        })]\n      }), remainingDistance !== null && remainingTime !== null && _jsxs(View, {\n        style: styles.navigationInfo,\n        children: [_jsxs(View, {\n          style: styles.navigationInfoItem,\n          children: [_jsx(Feather, {\n            name: \"map\",\n            size: 16,\n            color: \"#FF6B00\"\n          }), _jsx(Text, {\n            style: styles.navigationInfoText,\n            children: formatDistance(remainingDistance)\n          })]\n        }), _jsxs(View, {\n          style: styles.navigationInfoItem,\n          children: [_jsx(Feather, {\n            name: \"clock\",\n            size: 16,\n            color: \"#FF6B00\"\n          }), _jsx(Text, {\n            style: styles.navigationInfoText,\n            children: formatTime(String(remainingTime))\n          })]\n        })]\n      }), _jsx(TouchableOpacity, {\n        style: styles.centerButton,\n        onPress: function onPress() {\n          if (mapRef.current && currentLocation) {\n            mapRef.current.animateToRegion({\n              latitude: currentLocation.coords.latitude,\n              longitude: currentLocation.coords.longitude,\n              latitudeDelta: 0.01,\n              longitudeDelta: 0.01\n            });\n          }\n        },\n        children: _jsx(Feather, {\n          name: \"crosshair\",\n          size: 24,\n          color: \"#212121\"\n        })\n      })]\n    }), showClientInfo && delivery.user_id && _jsx(Card, {\n      style: styles.clientCard,\n      children: _jsxs(Card.Content, {\n        children: [_jsxs(View, {\n          style: styles.clientHeader,\n          children: [_jsx(Text, {\n            style: styles.clientTitle,\n            children: \"Informations du client\"\n          }), _jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return setShowClientInfo(false);\n            },\n            children: _jsx(Feather, {\n              name: \"x\",\n              size: 20,\n              color: \"#757575\"\n            })\n          })]\n        }), _jsx(View, {\n          style: styles.clientInfo,\n          children: _jsx(Text, {\n            style: styles.clientName,\n            children: delivery.user_id\n          })\n        })]\n      })\n    }), _jsx(Card, {\n      style: styles.deliveryCard,\n      children: _jsxs(Card.Content, {\n        children: [_jsxs(View, {\n          style: styles.deliveryHeader,\n          children: [_jsxs(View, {\n            children: [_jsx(Text, {\n              style: styles.deliveryStatus,\n              children: delivery.status === \"accepted\" ? \"À récupérer\" : delivery.status === \"in_progress\" ? \"En cours de livraison\" : delivery.status === \"delivered\" ? \"Livré\" : \"Terminé\"\n            }), _jsxs(Text, {\n              style: styles.deliveryPrice,\n              children: [formatPrice(delivery.final_price || delivery.proposed_price), \" FCFA\"]\n            })]\n          }), _jsxs(View, {\n            style: styles.deliveryStatusBadge,\n            children: [isTracking ? _jsx(Badge, {\n              size: 12,\n              style: styles.trackingBadge\n            }) : _jsx(Badge, {\n              size: 12,\n              style: styles.notTrackingBadge\n            }), _jsx(Text, {\n              style: styles.trackingStatus,\n              children: isTracking ? \"Suivi actif\" : \"Suivi inactif\"\n            })]\n          })]\n        }), _jsx(View, {\n          style: styles.addressContainer,\n          children: delivery.status === \"accepted\" ? _jsx(_Fragment, {\n            children: _jsxs(View, {\n              style: styles.addressRow,\n              children: [_jsx(View, {\n                style: styles.addressDot\n              }), _jsxs(View, {\n                style: styles.addressTextContainer,\n                children: [_jsx(Text, {\n                  style: styles.addressLabel,\n                  children: \"Ramassage\"\n                }), _jsx(Text, {\n                  style: styles.addressText,\n                  children: delivery.pickup_address\n                }), _jsx(Text, {\n                  style: styles.communeText,\n                  children: \"Commune de retrait\"\n                })]\n              })]\n            })\n          }) : _jsxs(_Fragment, {\n            children: [_jsxs(View, {\n              style: styles.addressRow,\n              children: [_jsx(View, {\n                style: [styles.addressDot, styles.completedDot]\n              }), _jsxs(View, {\n                style: styles.addressTextContainer,\n                children: [_jsx(Text, {\n                  style: styles.addressLabel,\n                  children: \"Ramassage (Compl\\xE9t\\xE9)\"\n                }), _jsx(Text, {\n                  style: styles.addressText,\n                  children: delivery.pickup_address\n                }), _jsx(Text, {\n                  style: styles.communeText,\n                  children: \"Commune de retrait\"\n                })]\n              })]\n            }), _jsx(View, {\n              style: styles.addressLine\n            }), _jsxs(View, {\n              style: styles.addressRow,\n              children: [_jsx(View, {\n                style: [styles.addressDot, styles.destinationDot]\n              }), _jsxs(View, {\n                style: styles.addressTextContainer,\n                children: [_jsx(Text, {\n                  style: styles.addressLabel,\n                  children: \"Livraison\"\n                }), _jsx(Text, {\n                  style: styles.addressText,\n                  children: delivery.delivery_address\n                }), _jsx(Text, {\n                  style: styles.communeText,\n                  children: \"Commune de retrait\"\n                })]\n              })]\n            })]\n          })\n        }), delivery.package_description && _jsxs(View, {\n          style: styles.descriptionContainer,\n          children: [_jsx(Text, {\n            style: styles.descriptionLabel,\n            children: \"Description :\"\n          }), _jsx(Text, {\n            style: styles.descriptionText,\n            children: delivery.package_description\n          })]\n        })]\n      })\n    }), _jsxs(View, {\n      style: styles.actionsContainer,\n      children: [delivery.status === \"accepted\" && _jsx(Button, {\n        mode: \"contained\",\n        onPress: function onPress() {\n          return updateStatus(\"in_progress\");\n        },\n        style: styles.actionButton,\n        loading: statusLoading,\n        disabled: statusLoading,\n        icon: \"package-up\",\n        children: \"J'ai r\\xE9cup\\xE9r\\xE9 le colis\"\n      }), delivery.status === \"in_progress\" && _jsx(Button, {\n        mode: \"contained\",\n        onPress: function onPress() {\n          return updateStatus(\"delivered\");\n        },\n        style: styles.actionButton,\n        loading: statusLoading,\n        disabled: statusLoading,\n        icon: \"package-down\",\n        children: \"J'ai livr\\xE9 le colis\"\n      }), delivery.status === \"delivered\" && _jsxs(View, {\n        style: styles.deliveredMessage,\n        children: [_jsx(Feather, {\n          name: \"check-circle\",\n          size: 24,\n          color: \"#4CAF50\"\n        }), _jsx(Text, {\n          style: styles.deliveredText,\n          children: \"Livraison effectu\\xE9e. En attente de confirmation du client.\"\n        })]\n      }), !isTracking && delivery.status !== \"delivered\" && delivery.status !== \"completed\" && _jsx(Button, {\n        mode: \"outlined\",\n        onPress: startLocationTracking,\n        style: styles.trackingButton,\n        icon: \"map-marker\",\n        children: \"Activer le suivi\"\n      }), isTracking && _jsx(Button, {\n        mode: \"outlined\",\n        onPress: stopLocationTracking,\n        style: styles.stopTrackingButton,\n        icon: \"map-marker-off\",\n        children: \"D\\xE9sactiver le suivi\"\n      })]\n    }), _jsx(Snackbar, {\n      visible: snackbarVisible,\n      onDismiss: function onDismiss() {\n        return setSnackbarVisible(false);\n      },\n      duration: 3000,\n      action: {\n        label: \"OK\",\n        onPress: function onPress() {\n          return setSnackbarVisible(false);\n        }\n      },\n      children: error\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#FFFFFF\"\n  },\n  header: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: \"#EEEEEE\"\n  },\n  headerTitle: {\n    fontSize: 18,\n    fontWeight: \"bold\",\n    color: \"#212121\"\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: 20\n  },\n  loadingText: {\n    marginTop: 16,\n    color: \"#757575\",\n    fontSize: 16\n  },\n  offlineBanner: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"#FF9800\",\n    padding: 8\n  },\n  offlineText: {\n    color: \"#FFFFFF\",\n    marginLeft: 8,\n    fontWeight: \"bold\"\n  },\n  mapContainer: {\n    height: 300,\n    position: \"relative\"\n  },\n  map: _objectSpread({}, StyleSheet.absoluteFillObject),\n  mapPlaceholder: _objectSpread(_objectSpread({}, StyleSheet.absoluteFillObject), {}, {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: \"#F5F5F5\"\n  }),\n  mapPlaceholderText: {\n    marginTop: 16,\n    color: \"#757575\"\n  },\n  navigationInfo: {\n    position: \"absolute\",\n    bottom: 16,\n    left: 16,\n    right: 16,\n    flexDirection: \"row\",\n    justifyContent: \"space-around\",\n    backgroundColor: \"rgba(255, 255, 255, 0.9)\",\n    borderRadius: 8,\n    padding: 12,\n    elevation: 3\n  },\n  navigationInfoItem: {\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  navigationInfoText: {\n    marginLeft: 8,\n    fontWeight: \"bold\",\n    color: \"#212121\",\n    fontSize: 16\n  },\n  centerButton: {\n    position: \"absolute\",\n    top: 16,\n    right: 16,\n    backgroundColor: \"white\",\n    borderRadius: 30,\n    width: 48,\n    height: 48,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    elevation: 3\n  },\n  clientCard: {\n    margin: 16,\n    elevation: 2\n  },\n  clientHeader: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    marginBottom: 8\n  },\n  clientTitle: {\n    fontSize: 16,\n    fontWeight: \"bold\",\n    color: \"#212121\"\n  },\n  clientInfo: {\n    marginTop: 8\n  },\n  clientName: {\n    fontSize: 16,\n    color: \"#212121\"\n  },\n  clientContact: {\n    flexDirection: \"row\",\n    marginTop: 12\n  },\n  contactButton: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    backgroundColor: \"#F5F5F5\",\n    borderRadius: 20,\n    paddingVertical: 8,\n    paddingHorizontal: 16,\n    marginRight: 12\n  },\n  contactButtonText: {\n    marginLeft: 8,\n    color: \"#212121\"\n  },\n  deliveryCard: {\n    margin: 16,\n    elevation: 2\n  },\n  deliveryHeader: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"flex-start\",\n    marginBottom: 16\n  },\n  deliveryStatus: {\n    fontSize: 16,\n    fontWeight: \"bold\",\n    color: \"#212121\"\n  },\n  deliveryPrice: {\n    fontSize: 18,\n    fontWeight: \"bold\",\n    color: \"#FF6B00\",\n    marginTop: 4\n  },\n  deliveryStatusBadge: {\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  trackingBadge: {\n    backgroundColor: \"#4CAF50\"\n  },\n  notTrackingBadge: {\n    backgroundColor: \"#F44336\"\n  },\n  trackingStatus: {\n    fontSize: 12,\n    color: \"#757575\",\n    marginLeft: 4\n  },\n  addressContainer: {\n    marginBottom: 12\n  },\n  addressRow: {\n    flexDirection: \"row\",\n    alignItems: \"flex-start\",\n    marginBottom: 8\n  },\n  addressDot: {\n    width: 12,\n    height: 12,\n    borderRadius: 6,\n    backgroundColor: \"#FF6B00\",\n    marginTop: 4,\n    marginRight: 8\n  },\n  completedDot: {\n    backgroundColor: \"#9E9E9E\"\n  },\n  destinationDot: {\n    backgroundColor: \"#4CAF50\"\n  },\n  addressLine: {\n    width: 2,\n    height: 20,\n    backgroundColor: \"#E0E0E0\",\n    marginLeft: 5,\n    marginBottom: 8\n  },\n  addressTextContainer: {\n    flex: 1\n  },\n  addressLabel: {\n    fontSize: 12,\n    color: \"#757575\",\n    marginBottom: 2\n  },\n  addressText: {\n    fontSize: 14,\n    color: \"#212121\"\n  },\n  communeText: {\n    fontSize: 12,\n    color: \"#757575\",\n    marginTop: 2\n  },\n  descriptionContainer: {\n    marginTop: 12,\n    padding: 12,\n    backgroundColor: \"#F5F5F5\",\n    borderRadius: 8\n  },\n  descriptionLabel: {\n    fontSize: 14,\n    fontWeight: \"bold\",\n    color: \"#212121\",\n    marginBottom: 4\n  },\n  descriptionText: {\n    fontSize: 14,\n    color: \"#212121\"\n  },\n  actionsContainer: {\n    padding: 16\n  },\n  actionButton: {\n    backgroundColor: \"#FF6B00\",\n    marginBottom: 12\n  },\n  trackingButton: {\n    borderColor: \"#4CAF50\",\n    borderWidth: 1\n  },\n  stopTrackingButton: {\n    borderColor: \"#F44336\",\n    borderWidth: 1\n  },\n  deliveredMessage: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    backgroundColor: \"#E8F5E9\",\n    padding: 16,\n    borderRadius: 8,\n    marginBottom: 12\n  },\n  deliveredText: {\n    marginLeft: 12,\n    color: \"#2E7D32\",\n    flex: 1\n  },\n  permissionDeniedContainer: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: 20\n  },\n  permissionDeniedTitle: {\n    fontSize: 20,\n    fontWeight: \"bold\",\n    color: \"#212121\",\n    marginTop: 16,\n    marginBottom: 8\n  },\n  permissionDeniedText: {\n    fontSize: 16,\n    color: \"#757575\",\n    textAlign: \"center\",\n    marginBottom: 24\n  },\n  permissionButton: {\n    backgroundColor: \"#FF6B00\"\n  }\n});\nexport default CourierTrackDeliveryScreen;","map":{"version":3,"names":["_defineProperty","_toConsumableArray","_asyncToGenerator","_slicedToArray","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","useState","useEffect","useRef","useCallback","View","StyleSheet","TouchableOpacity","Alert","Platform","AppState","Text","Button","Card","Snackbar","ActivityIndicator","Badge","SafeAreaView","Feather","MapView","Marker","Polyline","PROVIDER_GOOGLE","Location","Audio","useAuth","useNetwork","useWebSocket","fetchDeliveryDetails","updateDeliveryStatus","sendTrackingPoint","getDirections","sendDeliveryNotification","formatPrice","formatTime","formatDistance","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LOCATION_TRACKING_INTERVAL","LOCATION_DISTANCE_FILTER","CourierTrackDeliveryScreen","_ref","route","navigation","deliveryId","params","_useAuth","user","_useNetwork","isConnected","isOfflineMode","addPendingUpload","_useWebSocket","sendMessage","_useState","_useState2","delivery","setDelivery","_useState3","_useState4","loading","setLoading","_useState5","_useState6","statusLoading","setStatusLoading","_useState7","_useState8","currentLocation","setCurrentLocation","_useState9","_useState0","routeCoordinates","setRouteCoordinates","_useState1","_useState10","trackingHistory","setTrackingHistory","_useState11","_useState12","isTracking","setIsTracking","_useState13","_useState14","remainingDistance","setRemainingDistance","_useState15","_useState16","remainingTime","setRemainingTime","_useState17","_useState18","error","setError","_useState19","_useState20","snackbarVisible","setSnackbarVisible","_useState21","_useState22","locationPermissionDenied","setLocationPermissionDenied","_useState23","_useState24","arrivedAtPickup","setArrivedAtPickup","_useState25","_useState26","arrivedAtDelivery","setArrivedAtDelivery","_useState27","_useState28","showClientInfo","setShowClientInfo","mapRef","locationSubscription","trackingInterval","appStateRef","currentState","soundRef","startLocationTracking","stopLocationTracking","startLocationUpdatesAsync","accuracy","Accuracy","Balanced","distanceInterval","timeInterval","foregroundService","notificationTitle","notificationBody","current","watchPositionAsync","handleLocationUpdate","setInterval","sendCurrentLocation","console","handleAppStateChange","nextAppState","match","OS","loadDeliveryDetails","data","toString","courier_id","id","alert","text","onPress","goBack","_yield$Location$reque","requestForegroundPermissionsAsync","status","location","getCurrentPositionAsync","High","pickup_lat","pickup_lng","loadRoute","coords","latitude","longitude","delivery_lat","delivery_lng","_ref4","startLat","startLng","endLat","endLng","directions","routes","coordinates","distance","duration","fitToCoordinates","edgePadding","top","right","bottom","left","animated","_x","_x2","_x3","_x4","hasStartedLocationUpdatesAsync","then","hasStarted","stopLocationUpdatesAsync","remove","clearInterval","updateRouteWithNewLocation","checkArrivalStatus","newPoint","timestamp","Date","toISOString","speed","prev","concat","ARRIVAL_THRESHOLD","calculateDistance","playArrivalSound","updateStatus","lat1","lon1","lat2","lon2","R","dLat","deg2rad","dLon","a","Math","sin","cos","c","atan2","sqrt","deg","PI","_ref5","_yield$Audio$Sound$cr","Sound","createAsync","require","sound","playAsync","_sendCurrentLocation","trackingData","delivery_id","lat","lng","type","retries","_ref6","operation","message","user_id","title","body","_x5","unloadAsync","subscription","addEventListener","style","styles","container","children","header","name","size","color","headerTitle","width","loadingContainer","loadingText","permissionDeniedContainer","permissionDeniedTitle","permissionDeniedText","mode","_yield$Location$reque2","permissionButton","offlineBanner","offlineText","mapContainer","ref","map","provider","initialRegion","latitudeDelta","longitudeDelta","showsUserLocation","showsMyLocationButton","showsCompass","showsTraffic","coordinate","description","pickup_address","pinColor","delivery_address","strokeWidth","strokeColor","point","lineDashPattern","mapPlaceholder","mapPlaceholderText","navigationInfo","navigationInfoItem","navigationInfoText","String","centerButton","animateToRegion","clientCard","Content","clientHeader","clientTitle","clientInfo","clientName","deliveryCard","deliveryHeader","deliveryStatus","deliveryPrice","final_price","proposed_price","deliveryStatusBadge","trackingBadge","notTrackingBadge","trackingStatus","addressContainer","addressRow","addressDot","addressTextContainer","addressLabel","addressText","communeText","completedDot","addressLine","destinationDot","package_description","descriptionContainer","descriptionLabel","descriptionText","actionsContainer","actionButton","disabled","icon","deliveredMessage","deliveredText","trackingButton","stopTrackingButton","visible","onDismiss","action","label","create","flex","backgroundColor","flexDirection","justifyContent","alignItems","padding","borderBottomWidth","borderBottomColor","fontSize","fontWeight","marginTop","marginLeft","height","position","absoluteFillObject","borderRadius","elevation","margin","marginBottom","clientContact","contactButton","paddingVertical","paddingHorizontal","marginRight","contactButtonText","borderColor","borderWidth","textAlign"],"sources":["/home/runner/workspace/mobile/screens/courier/CourierTrackDeliveryScreen.tsx"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\n\"use client\"\n\nimport type React from \"react\"\nimport { useState, useEffect, useRef, useCallback } from \"react\"\nimport { View, StyleSheet, TouchableOpacity, Alert, Platform, AppState, type AppStateStatus } from \"react-native\"\nimport { Text, Button, Card, Snackbar, ActivityIndicator, Badge } from \"react-native-paper\"\nimport { SafeAreaView } from \"react-native-safe-area-context\"\nimport { Feather } from \"@expo/vector-icons\"\nimport MapView, { Marker, Polyline, PROVIDER_GOOGLE } from \"react-native-maps\"\n\nimport * as Location from \"expo-location\"\nimport { Audio } from \"expo-av\"\nimport { useAuth } from \"../../contexts/AuthContext\"\nimport { useNetwork } from \"../../contexts/NetworkContext\"\nimport { useWebSocket } from \"../../contexts/WebSocketContext\"\nimport {\n  fetchDeliveryDetails,\n  updateDeliveryStatus,\n  sendTrackingPoint,\n  getDirections,\n  sendDeliveryNotification,\n} from \"../../services/api\"\nimport { formatPrice, formatTime, formatDistance } from \"../../utils/formatters\"\nimport type { NativeStackNavigationProp } from \"@react-navigation/native-stack\"\nimport type { RouteProp } from \"@react-navigation/native\"\nimport type { RootStackParamList } from \"../../types/navigation\"\nimport type { Delivery, DeliveryStatus } from \"../../types/models\"\n\ntype CourierTrackDeliveryScreenProps = {\n  route: RouteProp<RootStackParamList, \"CourierTrackDelivery\">\n  navigation: NativeStackNavigationProp<RootStackParamList, \"CourierTrackDelivery\">\n}\n\ninterface RouteCoordinate {\n  latitude: number\n  longitude: number\n}\n\ninterface TrackingPoint {\n  latitude: number\n  longitude: number\n  timestamp: string\n  accuracy: number\n  speed: number\n}\n\nconst LOCATION_TRACKING_INTERVAL = 15000 // 15 secondes\nconst LOCATION_DISTANCE_FILTER = 10 // 10 mètres\n\nconst CourierTrackDeliveryScreen: React.FC<CourierTrackDeliveryScreenProps> = ({ route, navigation }) => {\n  const { deliveryId } = route.params\n  const { user } = useAuth()\n  const { isConnected, isOfflineMode, addPendingUpload } = useNetwork()\n  const { sendMessage } = useWebSocket()\n\n  const [delivery, setDelivery] = useState<Delivery | null>(null)\n  const [loading, setLoading] = useState<boolean>(true)\n  const [statusLoading, setStatusLoading] = useState<boolean>(false)\n  const [currentLocation, setCurrentLocation] = useState<Location.LocationObject | null>(null)\n  const [routeCoordinates, setRouteCoordinates] = useState<RouteCoordinate[]>([])\n  const [trackingHistory, setTrackingHistory] = useState<TrackingPoint[]>([])\n  const [isTracking, setIsTracking] = useState<boolean>(false)\n  const [remainingDistance, setRemainingDistance] = useState<number | null>(null)\n  const [remainingTime, setRemainingTime] = useState<number | null>(null)\n  const [error, setError] = useState<string>(\"\")\n  const [snackbarVisible, setSnackbarVisible] = useState<boolean>(false)\n  const [locationPermissionDenied, setLocationPermissionDenied] = useState<boolean>(false)\n  const [arrivedAtPickup, setArrivedAtPickup] = useState<boolean>(false)\n  const [arrivedAtDelivery, setArrivedAtDelivery] = useState<boolean>(false)\n  const [showClientInfo, setShowClientInfo] = useState<boolean>(false)\n\n  const mapRef = useRef<MapView | null>(null)\n  const locationSubscription = useRef<Location.LocationSubscription | null>(null)\n  const trackingInterval = useRef<number | null>(null)\n  const appStateRef = useRef<AppStateStatus>(AppState.currentState)\n  const soundRef = useRef<Audio.Sound | null>(null)\n\n  // Démarrer le suivi de localisation\n  const startLocationTracking = useCallback(async (): Promise<void> => {\n    try {\n      // Arrêter tout suivi existant\n      stopLocationTracking()\n\n      // Configurer le suivi de localisation en arrière-plan\n      await Location.startLocationUpdatesAsync(\"tracking-task\", {\n        accuracy: Location.Accuracy.Balanced,\n        distanceInterval: LOCATION_DISTANCE_FILTER,\n        timeInterval: LOCATION_TRACKING_INTERVAL,\n        foregroundService: {\n          notificationTitle: \"Suivi de livraison\",\n          notificationBody: \"Votre position est partagée avec le client\",\n        },\n      })\n\n      // Configurer le suivi de localisation au premier plan\n      locationSubscription.current = await Location.watchPositionAsync(\n        {\n          accuracy: Location.Accuracy.Balanced,\n          distanceInterval: LOCATION_DISTANCE_FILTER,\n          timeInterval: LOCATION_TRACKING_INTERVAL,\n        },\n        handleLocationUpdate,\n      )\n\n      // Configurer l'intervalle d'envoi des points de suivi\n      trackingInterval.current = setInterval(sendCurrentLocation, LOCATION_TRACKING_INTERVAL) as unknown as number\n\n      setIsTracking(true)\n    } catch (error) {\n      console.error(\"Error starting location tracking:\", error)\n      setError(\"Erreur lors du démarrage du suivi de localisation\")\n      setSnackbarVisible(true)\n    }\n  }, [handleLocationUpdate, sendCurrentLocation])\n\n  const handleAppStateChange = useCallback(\n    (nextAppState: AppStateStatus) => {\n      if (appStateRef.current.match(/inactive|background/) && nextAppState === \"active\") {\n        // L'application revient au premier plan\n        if (isTracking) {\n          stopLocationTracking()\n          startLocationTracking()\n        }\n      } else if (nextAppState.match(/inactive|background/) && appStateRef.current === \"active\") {\n        // L'application passe en arrière-plan\n        if (Platform.OS === \"ios\") {\n          // Sur iOS, le suivi de localisation en arrière-plan nécessite des configurations spéciales\n          stopLocationTracking()\n        }\n      }\n      appStateRef.current = nextAppState\n    },\n    [isTracking, startLocationTracking],\n  )\n\n  const loadDeliveryDetails = useCallback(async (): Promise<void> => {\n    try {\n      setLoading(true)\n      const data = await fetchDeliveryDetails(deliveryId.toString())\n      setDelivery(data)\n\n      // Vérifier si le coursier est bien assigné à cette livraison\n      if (data.courier_id !== user?.id) {\n        Alert.alert(\"Accès non autorisé\", \"Vous n'êtes pas le coursier assigné à cette livraison.\", [\n          { text: \"Retour\", onPress: () => navigation.goBack() },\n        ])\n        return\n      }\n\n      // Demander la permission de localisation\n      const { status } = await Location.requestForegroundPermissionsAsync()\n      if (status !== \"granted\") {\n        setLocationPermissionDenied(true)\n        return\n      }\n\n      // Obtenir la position actuelle\n      const location = await Location.getCurrentPositionAsync({\n        accuracy: Location.Accuracy.High,\n      })\n      setCurrentLocation(location)\n\n      // Charger l'itinéraire initial\n      if (data.status === \"accepted\") {\n        // Si la livraison est acceptée, l'itinéraire va de la position actuelle au point de ramassage\n        if (data.pickup_lat && data.pickup_lng) {\n          loadRoute(location.coords.latitude, location.coords.longitude, data.pickup_lat, data.pickup_lng)\n        }\n      } else if (data.status === \"in_progress\") {\n        // Si la livraison est en cours, l'itinéraire va du point de ramassage au point de livraison\n        if (data.pickup_lat && data.pickup_lng && data.delivery_lat && data.delivery_lng) {\n          loadRoute(location.coords.latitude, location.coords.longitude, data.delivery_lat, data.delivery_lng)\n        }\n      }\n\n      // Démarrer le suivi de localisation si la livraison est en cours\n      if (data.status === \"accepted\" || data.status === \"in_progress\") {\n        startLocationTracking()\n      }\n    } catch (error) {\n      console.error(\"Error loading delivery details:\", error)\n      setError(\"Erreur lors du chargement des détails de la livraison\")\n      setSnackbarVisible(true)\n    } finally {\n      setLoading(false)\n    }\n  }, [deliveryId, navigation, user, startLocationTracking])\n\n  // Charger l'itinéraire entre deux points\n  const loadRoute = async (startLat: number, startLng: number, endLat: number, endLng: number): Promise<void> => {\n    try {\n      // Dans une application réelle, vous utiliseriez un service comme Google Directions API\n      const directions = await getDirections(startLat, startLng, endLat, endLng)\n\n      if (directions && directions.routes && directions.routes.length > 0) {\n        const route = directions.routes[0]\n        setRouteCoordinates(route.coordinates)\n        setRemainingDistance(route.distance)\n        setRemainingTime(route.duration)\n\n        // Ajuster la vue de la carte pour montrer l'itinéraire complet\n        if (mapRef.current && route.coordinates.length > 0) {\n          mapRef.current.fitToCoordinates(route.coordinates, {\n            edgePadding: { top: 50, right: 50, bottom: 50, left: 50 },\n            animated: true,\n          })\n        }\n      }\n    } catch (error) {\n      console.error(\"Error loading route:\", error)\n    }\n  }\n\n  // Arrêter le suivi de localisation\n  const stopLocationTracking = (): void => {\n    // Arrêter le suivi de localisation en arrière-plan\n    Location.hasStartedLocationUpdatesAsync(\"tracking-task\").then((hasStarted) => {\n      if (hasStarted) {\n        Location.stopLocationUpdatesAsync(\"tracking-task\")\n      }\n    })\n\n    // Arrêter le suivi de localisation au premier plan\n    if (locationSubscription.current) {\n      locationSubscription.current.remove()\n      locationSubscription.current = null\n    }\n\n    // Arrêter l'intervalle d'envoi des points de suivi\n    if (trackingInterval.current) {\n      clearInterval(trackingInterval.current)\n      trackingInterval.current = null\n    }\n\n    setIsTracking(false)\n  }\n\n  function handleLocationUpdate(location: Location.LocationObject): void {\n    setCurrentLocation(location)\n    updateRouteWithNewLocation(location)\n    checkArrivalStatus(location)\n    const newPoint: TrackingPoint = {\n      latitude: location.coords.latitude,\n      longitude: location.coords.longitude,\n      timestamp: new Date().toISOString(),\n      accuracy: location.coords.accuracy || 0,\n      speed: location.coords.speed || 0,\n    }\n    setTrackingHistory((prev) => [...prev, newPoint])\n  }\n\n  // Mettre à jour l'itinéraire en fonction de la nouvelle position\n  const updateRouteWithNewLocation = (location: Location.LocationObject): void => {\n    if (!delivery) return\n\n    // Mettre à jour l'itinéraire en fonction du statut de la livraison\n    if (delivery.status === \"accepted\" && delivery.pickup_lat && delivery.pickup_lng) {\n      loadRoute(location.coords.latitude, location.coords.longitude, delivery.pickup_lat, delivery.pickup_lng)\n    } else if (delivery.status === \"in_progress\" && delivery.delivery_lat && delivery.delivery_lng) {\n      loadRoute(location.coords.latitude, location.coords.longitude, delivery.delivery_lat, delivery.delivery_lng)\n    }\n  }\n\n  // Vérifier si le coursier est arrivé au point de ramassage ou de livraison\n  const checkArrivalStatus = (location: Location.LocationObject): void => {\n    if (!delivery) return\n\n    const ARRIVAL_THRESHOLD = 50 // 50 mètres\n\n    // Vérifier si le coursier est arrivé au point de ramassage\n    if (delivery.status === \"accepted\" && delivery.pickup_lat && delivery.pickup_lng && !arrivedAtPickup) {\n      const distance = calculateDistance(\n        location.coords.latitude,\n        location.coords.longitude,\n        delivery.pickup_lat,\n        delivery.pickup_lng,\n      )\n\n      if (distance <= ARRIVAL_THRESHOLD) {\n        setArrivedAtPickup(true)\n        playArrivalSound()\n        Alert.alert(\n          \"Arrivée au point de ramassage\",\n          \"Vous êtes arrivé au point de ramassage. Récupérez le colis et commencez la livraison.\",\n          [\n            { text: \"Plus tard\" },\n            {\n              text: \"Commencer la livraison\",\n              onPress: () => updateStatus(\"in_progress\"),\n            },\n          ],\n        )\n      }\n    }\n\n    // Vérifier si le coursier est arrivé au point de livraison\n    if (delivery.status === \"in_progress\" && delivery.delivery_lat && delivery.delivery_lng && !arrivedAtDelivery) {\n      const distance = calculateDistance(\n        location.coords.latitude,\n        location.coords.longitude,\n        delivery.delivery_lat,\n        delivery.delivery_lng,\n      )\n\n      if (distance <= ARRIVAL_THRESHOLD) {\n        setArrivedAtDelivery(true)\n        playArrivalSound()\n        Alert.alert(\"Arrivée au point de livraison\", \"Vous êtes arrivé à destination. Livrez le colis au client.\", [\n          { text: \"Plus tard\" },\n          {\n            text: \"Confirmer la livraison\",\n            onPress: () => updateStatus(\"delivered\"),\n          },\n        ])\n      }\n    }\n  }\n\n  // Calculer la distance entre deux points géographiques\n  const calculateDistance = (lat1: number, lon1: number, lat2: number, lon2: number): number => {\n    const R = 6371 // Rayon de la Terre en km\n    const dLat = deg2rad(lat2 - lat1)\n    const dLon = deg2rad(lon2 - lon1)\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2)\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))\n    const distance = R * c * 1000 // Distance en mètres\n    return distance\n  }\n\n  // Convertir des degrés en radians\n  const deg2rad = (deg: number): number => {\n    return deg * (Math.PI / 180)\n  }\n\n  // Jouer le son d'arrivée\n  const playArrivalSound = async (): Promise<void> => {\n    try {\n      // eslint-disable-next-line @typescript-eslint/no-var-requires\n      const { sound } = await Audio.Sound.createAsync(require(\"../../assets/sounds/arrival.mp3\"))\n      soundRef.current = sound\n      await sound.playAsync()\n    } catch (error) {\n      console.error(\"Error playing sound:\", error)\n    }\n  }\n\n  async function sendCurrentLocation(): Promise<void> {\n    if (!currentLocation || !delivery || !isConnected) return\n    try {\n      const trackingData = {\n        delivery_id: deliveryId,\n        lat: currentLocation.coords.latitude,\n        lng: currentLocation.coords.longitude,\n        accuracy: currentLocation.coords.accuracy || 0,\n        speed: currentLocation.coords.speed || 0,\n        timestamp: new Date().toISOString(),\n      }\n      if (isOfflineMode) {\n        addPendingUpload({\n          type: \"tracking\",\n          data: trackingData,\n          retries: 0\n        })\n      } else {\n        await sendTrackingPoint(trackingData)\n        sendMessage({\n          type: \"tracking_update\",\n          data: {\n            delivery_id: deliveryId,\n            courier_id: user?.id,\n            location: {\n              lat: currentLocation.coords.latitude,\n              lng: currentLocation.coords.longitude,\n              timestamp: new Date().toISOString(),\n            },\n          },\n        })\n      }\n    } catch (error) {\n      console.error(\"Error sending tracking point:\", error)\n    }\n  }\n\n  // Mettre à jour le statut de la livraison\n  const updateStatus = async (status: Delivery[\"status\"]): Promise<void> => {\n    if (!delivery) return\n\n    try {\n      setStatusLoading(true)\n\n      if (isOfflineMode && !isConnected) {\n        // Utiliser un type valide pour PendingOperation\n        addPendingUpload({\n          type: \"delivery\",\n          data: {\n            delivery_id: deliveryId,\n            status,\n            operation: \"status_update\"\n          },\n          retries: 0\n        })\n\n        // Mettre à jour l'état local\n        setDelivery({ ...delivery, status })\n\n        Alert.alert(\"Mise à jour enregistrée\", \"Le statut sera mis à jour lorsque vous serez en ligne.\")\n      } else {\n        // Mettre à jour immédiatement\n        await updateDeliveryStatus(deliveryId.toString(), status)\n\n        // Mettre à jour l'état local\n        setDelivery({ ...delivery, status })\n\n        // Envoyer une notification au client\n        let message = \"\"\n        if (status === \"in_progress\") {\n          message = \"Le coursier a récupéré votre colis et est en route pour la livraison.\"\n        } else if (status === \"delivered\") {\n          message = \"Votre colis a été livré. Veuillez confirmer la réception.\"\n        }\n\n        if (message && delivery.user_id) {\n          await sendDeliveryNotification(delivery.user_id.toString(), {\n            title: \"Mise à jour de votre livraison\",\n            body: message,\n            data: { delivery_id: deliveryId, status },\n            type: \"\",\n            message: \"\"\n          })\n        }\n\n        // Mettre à jour l'itinéraire si nécessaire\n        if (status === \"in_progress\" && currentLocation && delivery.delivery_lat && delivery.delivery_lng) {\n          loadRoute(\n            currentLocation.coords.latitude,\n            currentLocation.coords.longitude,\n            delivery.delivery_lat,\n            delivery.delivery_lng,\n          )\n        }\n      }\n    } catch (error) {\n      console.error(\"Error updating delivery status:\", error)\n      setError(\"Erreur lors de la mise à jour du statut\")\n      setSnackbarVisible(true)\n    } finally {\n      setStatusLoading(false)\n    }\n  }\n\n  // Charger les détails de la livraison au montage du composant et lors du changement de deliveryId\n  useEffect(() => {\n    loadDeliveryDetails()\n    return () => {\n      stopLocationTracking()\n      if (soundRef.current) {\n        soundRef.current.unloadAsync()\n      }\n    }\n  }, [deliveryId, loadDeliveryDetails])\n\n  // Gérer les changements d'état de l'application (premier plan/arrière-plan)\n  useEffect(() => {\n    const subscription = AppState.addEventListener(\"change\", handleAppStateChange)\n    return () => {\n      subscription.remove()\n    }\n  }, [isTracking, handleAppStateChange])\n\n  if (loading || !delivery) {\n    return (\n      <SafeAreaView style={styles.container}>\n        <View style={styles.header}>\n          <TouchableOpacity onPress={() => navigation.goBack()}>\n            <Feather name=\"arrow-left\" size={24} color=\"#212121\" />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Chargement...</Text>\n          <View style={{ width: 24 }} />\n        </View>\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color=\"#FF6B00\" />\n          <Text style={styles.loadingText}>Chargement des détails de la livraison...</Text>\n        </View>\n      </SafeAreaView>\n    )\n  }\n\n  if (locationPermissionDenied) {\n    return (\n      <SafeAreaView style={styles.container}>\n        <View style={styles.header}>\n          <TouchableOpacity onPress={() => navigation.goBack()}>\n            <Feather name=\"arrow-left\" size={24} color=\"#212121\" />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Suivi de livraison</Text>\n          <View style={{ width: 24 }} />\n        </View>\n        <View style={styles.permissionDeniedContainer}>\n          <Feather name=\"map-pin\" size={64} color=\"#FF6B00\" />\n          <Text style={styles.permissionDeniedTitle}>Localisation requise</Text>\n          <Text style={styles.permissionDeniedText}>\n            Pour suivre cette livraison, vous devez autoriser l&apos;accès à votre position.\n          </Text>\n          <Button\n            mode=\"contained\"\n            onPress={async () => {\n              const { status } = await Location.requestForegroundPermissionsAsync()\n              if (status === \"granted\") {\n                setLocationPermissionDenied(false)\n                loadDeliveryDetails()\n              }\n            }}\n            style={styles.permissionButton}\n          >\n            Autoriser la localisation\n          </Button>\n        </View>\n      </SafeAreaView>\n    )\n  }\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <TouchableOpacity onPress={() => navigation.goBack()}>\n          <Feather name=\"arrow-left\" size={24} color=\"#212121\" />\n        </TouchableOpacity>\n        <Text style={styles.headerTitle}>Livraison #{delivery.id}</Text>\n        <TouchableOpacity onPress={() => setShowClientInfo(!showClientInfo)}>\n          <Feather name=\"info\" size={24} color=\"#212121\" />\n        </TouchableOpacity>\n      </View>\n\n      {isOfflineMode && (\n        <View style={styles.offlineBanner}>\n          <Feather name=\"wifi-off\" size={16} color=\"#FFFFFF\" />\n          <Text style={styles.offlineText}>Mode hors ligne</Text>\n        </View>\n      )}\n\n      <View style={styles.mapContainer}>\n        {currentLocation ? (\n          <MapView\n            ref={mapRef}\n            style={styles.map}\n            provider={PROVIDER_GOOGLE}\n            initialRegion={{\n              latitude: currentLocation.coords.latitude,\n              longitude: currentLocation.coords.longitude,\n              latitudeDelta: 0.01,\n              longitudeDelta: 0.01,\n            }}\n            showsUserLocation={true}\n            showsMyLocationButton={true}\n            showsCompass={true}\n            showsTraffic={true}\n            {...{} /* Cast to enforce type compatibility */}\n          >\n            {/* Point de ramassage */}\n            {delivery.pickup_lat && delivery.pickup_lng && (\n              <Marker\n                coordinate={{\n                  latitude: delivery.pickup_lat,\n                  longitude: delivery.pickup_lng,\n                }}\n                title=\"Point de ramassage\"\n                description={delivery.pickup_address}\n                pinColor=\"#FF6B00\"\n              />\n            )}\n\n            {/* Point de livraison */}\n            {delivery.delivery_lat && delivery.delivery_lng && (\n              <Marker\n                coordinate={{\n                  latitude: delivery.delivery_lat,\n                  longitude: delivery.delivery_lng,\n                }}\n                title=\"Point de livraison\"\n                description={delivery.delivery_address}\n                pinColor=\"#4CAF50\"\n              />\n            )}\n\n            {/* Itinéraire */}\n            {routeCoordinates.length > 0 && (\n              <Polyline coordinates={routeCoordinates} strokeWidth={4} strokeColor=\"#4285F4\" />\n            )}\n\n            {/* Historique de suivi */}\n            {trackingHistory.length > 1 && (\n              <Polyline\n                coordinates={trackingHistory.map((point) => ({\n                  latitude: point.latitude,\n                  longitude: point.longitude,\n                }))}\n                strokeWidth={3}\n                strokeColor=\"#FF6B00\"\n                lineDashPattern={[0, 4, 8]}\n              />\n            )}\n          </MapView>\n        ) : (\n          <View style={styles.mapPlaceholder}>\n            <ActivityIndicator size=\"large\" color=\"#FF6B00\" />\n            <Text style={styles.mapPlaceholderText}>Chargement de la carte...</Text>\n          </View>\n        )}\n\n        {/* Informations de navigation */}\n        {remainingDistance !== null && remainingTime !== null && (\n          <View style={styles.navigationInfo}>\n            <View style={styles.navigationInfoItem}>\n              <Feather name=\"map\" size={16} color=\"#FF6B00\" />\n              <Text style={styles.navigationInfoText}>{formatDistance(remainingDistance)}</Text>\n            </View>\n            <View style={styles.navigationInfoItem}>\n              <Feather name=\"clock\" size={16} color=\"#FF6B00\" />\n              <Text style={styles.navigationInfoText}>{formatTime(String(remainingTime))}</Text>\n            </View>\n          </View>\n        )}\n\n        {/* Bouton de centrage sur la position actuelle */}\n        <TouchableOpacity\n          style={styles.centerButton}\n          onPress={() => {\n            if (mapRef.current && currentLocation) {\n              mapRef.current.animateToRegion({\n                latitude: currentLocation.coords.latitude,\n                longitude: currentLocation.coords.longitude,\n                latitudeDelta: 0.01,\n                longitudeDelta: 0.01,\n              })\n            }\n          }}\n        >\n          <Feather name=\"crosshair\" size={24} color=\"#212121\" />\n        </TouchableOpacity>\n      </View>\n\n      {/* Informations du client (affichées conditionnellement) */}\n      {showClientInfo && delivery.user_id && (\n        <Card style={styles.clientCard}>\n          <Card.Content>\n            <View style={styles.clientHeader}>\n              <Text style={styles.clientTitle}>Informations du client</Text>\n              <TouchableOpacity onPress={() => setShowClientInfo(false)}>\n                <Feather name=\"x\" size={20} color=\"#757575\" />\n              </TouchableOpacity>\n            </View>\n            <View style={styles.clientInfo}>\n              <Text style={styles.clientName}>{delivery.user_id}</Text>\n              {/* Afficher d'autres informations si nécessaire */}\n            </View>\n          </Card.Content>\n        </Card>\n      )}\n\n      {/* Détails de la livraison */}\n      <Card style={styles.deliveryCard}>\n        <Card.Content>\n          <View style={styles.deliveryHeader}>\n            <View>\n              <Text style={styles.deliveryStatus}>\n                {delivery.status === \"accepted\"\n                  ? \"À récupérer\"\n                  : delivery.status === \"in_progress\"\n                    ? \"En cours de livraison\"\n                    : delivery.status === \"delivered\"\n                      ? \"Livré\"\n                      : \"Terminé\"}\n              </Text>\n              <Text style={styles.deliveryPrice}>\n                {formatPrice(delivery.final_price || delivery.proposed_price)} FCFA\n              </Text>\n            </View>\n            <View style={styles.deliveryStatusBadge}>\n              {isTracking ? (\n                <Badge size={12} style={styles.trackingBadge} />\n              ) : (\n                <Badge size={12} style={styles.notTrackingBadge} />\n              )}\n              <Text style={styles.trackingStatus}>{isTracking ? \"Suivi actif\" : \"Suivi inactif\"}</Text>\n            </View>\n          </View>\n\n          <View style={styles.addressContainer}>\n            {delivery.status === \"accepted\" ? (\n              <>\n                <View style={styles.addressRow}>\n                  <View style={styles.addressDot} />\n                  <View style={styles.addressTextContainer}>\n                    <Text style={styles.addressLabel}>Ramassage</Text>\n                    <Text style={styles.addressText}>{delivery.pickup_address}</Text>\n                    <Text style={styles.communeText}>Commune de retrait</Text>\n                  </View>\n                </View>\n              </>\n            ) : (\n              <>\n                <View style={styles.addressRow}>\n                  <View style={[styles.addressDot, styles.completedDot]} />\n                  <View style={styles.addressTextContainer}>\n                    <Text style={styles.addressLabel}>Ramassage (Complété)</Text>\n                    <Text style={styles.addressText}>{delivery.pickup_address}</Text>\n                    <Text style={styles.communeText}>Commune de retrait</Text>\n                  </View>\n                </View>\n\n                <View style={styles.addressLine} />\n\n                <View style={styles.addressRow}>\n                  <View style={[styles.addressDot, styles.destinationDot]} />\n                  <View style={styles.addressTextContainer}>\n                    <Text style={styles.addressLabel}>Livraison</Text>\n                    <Text style={styles.addressText}>{delivery.delivery_address}</Text>\n                    <Text style={styles.communeText}>Commune de retrait</Text>\n                  </View>\n                </View>\n              </>\n            )}\n          </View>\n\n          {delivery.package_description && (\n            <View style={styles.descriptionContainer}>\n              <Text style={styles.descriptionLabel}>Description :</Text>\n              <Text style={styles.descriptionText}>{delivery.package_description}</Text>\n            </View>\n          )}\n        </Card.Content>\n      </Card>\n\n      {/* Actions */}\n      <View style={styles.actionsContainer}>\n        {delivery.status === \"accepted\" && (\n          <Button\n            mode=\"contained\"\n            onPress={() => updateStatus(\"in_progress\")}\n            style={styles.actionButton}\n            loading={statusLoading}\n            disabled={statusLoading}\n            icon=\"package-up\"\n          >\n            J&apos;ai récupéré le colis\n          </Button>\n        )}\n\n        {delivery.status === \"in_progress\" && (\n          <Button\n            mode=\"contained\"\n            onPress={() => updateStatus(\"delivered\")}\n            style={styles.actionButton}\n            loading={statusLoading}\n            disabled={statusLoading}\n            icon=\"package-down\"\n          >\n            J&apos;ai livré le colis\n          </Button>\n        )}\n\n        {delivery.status === \"delivered\" && (\n          <View style={styles.deliveredMessage}>\n            <Feather name=\"check-circle\" size={24} color=\"#4CAF50\" />\n            <Text style={styles.deliveredText}>Livraison effectuée. En attente de confirmation du client.</Text>\n          </View>\n        )}\n\n        {!isTracking && delivery.status !== \"delivered\" && delivery.status !== \"completed\" && (\n          <Button mode=\"outlined\" onPress={startLocationTracking} style={styles.trackingButton} icon=\"map-marker\">\n            Activer le suivi\n          </Button>\n        )}\n\n        {isTracking && (\n          <Button\n            mode=\"outlined\"\n            onPress={stopLocationTracking}\n            style={styles.stopTrackingButton}\n            icon=\"map-marker-off\"\n          >\n            Désactiver le suivi\n          </Button>\n        )}\n      </View>\n\n      <Snackbar\n        visible={snackbarVisible}\n        onDismiss={() => setSnackbarVisible(false)}\n        duration={3000}\n        action={{\n          label: \"OK\",\n          onPress: () => setSnackbarVisible(false),\n        }}\n      >\n        {error}\n      </Snackbar>\n    </SafeAreaView>\n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#FFFFFF\",\n  },\n  header: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: \"#EEEEEE\",\n  },\n  headerTitle: {\n    fontSize: 18,\n    fontWeight: \"bold\",\n    color: \"#212121\",\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: 20,\n  },\n  loadingText: {\n    marginTop: 16,\n    color: \"#757575\",\n    fontSize: 16,\n  },\n  offlineBanner: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"#FF9800\",\n    padding: 8,\n  },\n  offlineText: {\n    color: \"#FFFFFF\",\n    marginLeft: 8,\n    fontWeight: \"bold\",\n  },\n  mapContainer: {\n    height: 300,\n    position: \"relative\",\n  },\n  map: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  mapPlaceholder: {\n    ...StyleSheet.absoluteFillObject,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: \"#F5F5F5\",\n  },\n  mapPlaceholderText: {\n    marginTop: 16,\n    color: \"#757575\",\n  },\n  navigationInfo: {\n    position: \"absolute\",\n    bottom: 16,\n    left: 16,\n    right: 16,\n    flexDirection: \"row\",\n    justifyContent: \"space-around\",\n    backgroundColor: \"rgba(255, 255, 255, 0.9)\",\n    borderRadius: 8,\n    padding: 12,\n    elevation: 3,\n  },\n  navigationInfoItem: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  navigationInfoText: {\n    marginLeft: 8,\n    fontWeight: \"bold\",\n    color: \"#212121\",\n    fontSize: 16,\n  },\n  centerButton: {\n    position: \"absolute\",\n    top: 16,\n    right: 16,\n    backgroundColor: \"white\",\n    borderRadius: 30,\n    width: 48,\n    height: 48,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    elevation: 3,\n  },\n  clientCard: {\n    margin: 16,\n    elevation: 2,\n  },\n  clientHeader: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    marginBottom: 8,\n  },\n  clientTitle: {\n    fontSize: 16,\n    fontWeight: \"bold\",\n    color: \"#212121\",\n  },\n  clientInfo: {\n    marginTop: 8,\n  },\n  clientName: {\n    fontSize: 16,\n    color: \"#212121\",\n  },\n  clientContact: {\n    flexDirection: \"row\",\n    marginTop: 12,\n  },\n  contactButton: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    backgroundColor: \"#F5F5F5\",\n    borderRadius: 20,\n    paddingVertical: 8,\n    paddingHorizontal: 16,\n    marginRight: 12,\n  },\n  contactButtonText: {\n    marginLeft: 8,\n    color: \"#212121\",\n  },\n  deliveryCard: {\n    margin: 16,\n    elevation: 2,\n  },\n  deliveryHeader: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"flex-start\",\n    marginBottom: 16,\n  },\n  deliveryStatus: {\n    fontSize: 16,\n    fontWeight: \"bold\",\n    color: \"#212121\",\n  },\n  deliveryPrice: {\n    fontSize: 18,\n    fontWeight: \"bold\",\n    color: \"#FF6B00\",\n    marginTop: 4,\n  },\n  deliveryStatusBadge: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  trackingBadge: {\n    backgroundColor: \"#4CAF50\",\n  },\n  notTrackingBadge: {\n    backgroundColor: \"#F44336\",\n  },\n  trackingStatus: {\n    fontSize: 12,\n    color: \"#757575\",\n    marginLeft: 4,\n  },\n  addressContainer: {\n    marginBottom: 12,\n  },\n  addressRow: {\n    flexDirection: \"row\",\n    alignItems: \"flex-start\",\n    marginBottom: 8,\n  },\n  addressDot: {\n    width: 12,\n    height: 12,\n    borderRadius: 6,\n    backgroundColor: \"#FF6B00\",\n    marginTop: 4,\n    marginRight: 8,\n  },\n  completedDot: {\n    backgroundColor: \"#9E9E9E\",\n  },\n  destinationDot: {\n    backgroundColor: \"#4CAF50\",\n  },\n  addressLine: {\n    width: 2,\n    height: 20,\n    backgroundColor: \"#E0E0E0\",\n    marginLeft: 5,\n    marginBottom: 8,\n  },\n  addressTextContainer: {\n    flex: 1,\n  },\n  addressLabel: {\n    fontSize: 12,\n    color: \"#757575\",\n    marginBottom: 2,\n  },\n  addressText: {\n    fontSize: 14,\n    color: \"#212121\",\n  },\n  communeText: {\n    fontSize: 12,\n    color: \"#757575\",\n    marginTop: 2,\n  },\n  descriptionContainer: {\n    marginTop: 12,\n    padding: 12,\n    backgroundColor: \"#F5F5F5\",\n    borderRadius: 8,\n  },\n  descriptionLabel: {\n    fontSize: 14,\n    fontWeight: \"bold\",\n    color: \"#212121\",\n    marginBottom: 4,\n  },\n  descriptionText: {\n    fontSize: 14,\n    color: \"#212121\",\n  },\n  actionsContainer: {\n    padding: 16,\n  },\n  actionButton: {\n    backgroundColor: \"#FF6B00\",\n    marginBottom: 12,\n  },\n  trackingButton: {\n    borderColor: \"#4CAF50\",\n    borderWidth: 1,\n  },\n  stopTrackingButton: {\n    borderColor: \"#F44336\",\n    borderWidth: 1,\n  },\n  deliveredMessage: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    backgroundColor: \"#E8F5E9\",\n    padding: 16,\n    borderRadius: 8,\n    marginBottom: 12,\n  },\n  deliveredText: {\n    marginLeft: 12,\n    color: \"#2E7D32\",\n    flex: 1,\n  },\n  permissionDeniedContainer: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: 20,\n  },\n  permissionDeniedTitle: {\n    fontSize: 20,\n    fontWeight: \"bold\",\n    color: \"#212121\",\n    marginTop: 16,\n    marginBottom: 8,\n  },\n  permissionDeniedText: {\n    fontSize: 16,\n    color: \"#757575\",\n    textAlign: \"center\",\n    marginBottom: 24,\n  },\n  permissionButton: {\n    backgroundColor: \"#FF6B00\",\n  },\n})\n\nexport default CourierTrackDeliveryScreen"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}