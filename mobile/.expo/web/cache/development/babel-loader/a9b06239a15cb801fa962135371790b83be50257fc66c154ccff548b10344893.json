{"ast":null,"code":"\"use client\";\n\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { useState, useEffect, useCallback } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Text, TextInput, Button, Card, Divider, Snackbar } from \"react-native-paper\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { Feather } from \"@expo/vector-icons\";\nimport MapView, { Marker, Polyline } from \"react-native-maps\";\nimport * as Location from \"expo-location\";\nimport { useNetwork } from \"../../contexts/NetworkContext\";\nimport { useDelivery } from \"../../hooks\";\nimport { formatPrice, formatDate } from \"../../utils/formatters\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar BidScreen = function BidScreen(_ref) {\n  var route = _ref.route,\n    navigation = _ref.navigation;\n  var deliveryId = route.params.deliveryId;\n  var _useNetwork = useNetwork(),\n    isConnected = _useNetwork.isConnected,\n    isOfflineMode = _useNetwork.isOfflineMode,\n    addPendingUpload = _useNetwork.addPendingUpload;\n  var _useDelivery = useDelivery(),\n    getDeliveryDetails = _useDelivery.getDeliveryDetails,\n    placeBid = _useDelivery.placeBid;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    delivery = _useState2[0],\n    setDelivery = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    bidAmount = _useState4[0],\n    setBidAmount = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    bidLoading = _useState8[0],\n    setBidLoading = _useState8[1];\n  var _useState9 = useState(\"\"),\n    _useState0 = _slicedToArray(_useState9, 2),\n    error = _useState0[0],\n    setError = _useState0[1];\n  var _useState1 = useState(false),\n    _useState10 = _slicedToArray(_useState1, 2),\n    visible = _useState10[0],\n    setVisible = _useState10[1];\n  var _useState11 = useState(null),\n    _useState12 = _slicedToArray(_useState11, 2),\n    currentLocation = _useState12[0],\n    setCurrentLocation = _useState12[1];\n  var _useState13 = useState(null),\n    _useState14 = _slicedToArray(_useState13, 2),\n    distance = _useState14[0],\n    setDistance = _useState14[1];\n  var _useState15 = useState(null),\n    _useState16 = _slicedToArray(_useState15, 2),\n    estimatedTime = _useState16[0],\n    setEstimatedTime = _useState16[1];\n  var _useState17 = useState([]),\n    _useState18 = _slicedToArray(_useState17, 2),\n    routeCoordinates = _useState18[0],\n    setRouteCoordinates = _useState18[1];\n  var deg2rad = useCallback(function (deg) {\n    return deg * (Math.PI / 180);\n  }, []);\n  var calculateDistance = useCallback(function (lat1, lon1, lat2, lon2) {\n    var R = 6371;\n    var dLat = deg2rad(lat2 - lat1);\n    var dLon = deg2rad(lon2 - lon1);\n    var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    var distance = R * c;\n    return Math.round(distance * 10) / 10;\n  }, [deg2rad]);\n  var generateSimulatedRoute = useCallback(function (start, end) {\n    var points = [];\n    var steps = 5;\n    for (var i = 0; i <= steps; i++) {\n      var fraction = i / steps;\n      var jitter = i > 0 && i < steps ? (Math.random() - 0.5) * 0.005 : 0;\n      points.push({\n        latitude: start.latitude + (end.latitude - start.latitude) * fraction + jitter,\n        longitude: start.longitude + (end.longitude - start.longitude) * fraction + jitter\n      });\n    }\n    return points;\n  }, []);\n  var calculateRouteDetails = useCallback(_asyncToGenerator(function* () {\n    if (!(delivery != null && delivery.pickup_lat) || !(delivery != null && delivery.pickup_lng) || !currentLocation) return;\n    try {\n      var _distance = calculateDistance(currentLocation.coords.latitude, currentLocation.coords.longitude, delivery.pickup_lat, delivery.pickup_lng);\n      setDistance(_distance);\n      var timeInMinutes = Math.round(_distance * 3);\n      setEstimatedTime(timeInMinutes);\n      var simulatedRoute = generateSimulatedRoute({\n        latitude: currentLocation.coords.latitude,\n        longitude: currentLocation.coords.longitude\n      }, {\n        latitude: delivery.pickup_lat,\n        longitude: delivery.pickup_lng\n      });\n      setRouteCoordinates(simulatedRoute);\n    } catch (error) {\n      console.error(\"Error calculating route:\", error);\n    }\n  }), [delivery, currentLocation, calculateDistance, generateSimulatedRoute]);\n  var loadDeliveryDetails = useCallback(_asyncToGenerator(function* () {\n    try {\n      setLoading(true);\n      var data = yield getDeliveryDetails(deliveryId.toString());\n      setDelivery(data);\n      if (data) {\n        var _ref4, _data$actual_price;\n        var defaultBid = Math.round(((_ref4 = (_data$actual_price = data.actual_price) != null ? _data$actual_price : data.price) != null ? _ref4 : 0) * 0.9);\n        setBidAmount(defaultBid.toString());\n      }\n    } catch (error) {\n      setError(\"Erreur lors du chargement des détails de la livraison\");\n      setVisible(true);\n    } finally {\n      setLoading(false);\n    }\n  }), [deliveryId, getDeliveryDetails]);\n  var getCurrentLocation = useCallback(_asyncToGenerator(function* () {\n    try {\n      var _yield$Location$reque = yield Location.requestForegroundPermissionsAsync(),\n        status = _yield$Location$reque.status;\n      if (status !== \"granted\") {\n        setError(\"Permission to access location was denied\");\n        return;\n      }\n      var location = yield Location.getCurrentPositionAsync({});\n      setCurrentLocation(location);\n    } catch (error) {\n      console.error(\"Error getting current location:\", error);\n    }\n  }), []);\n  useEffect(function () {\n    loadDeliveryDetails();\n    getCurrentLocation();\n  }, [loadDeliveryDetails, getCurrentLocation]);\n  useEffect(function () {\n    if (delivery && currentLocation) {\n      calculateRouteDetails();\n    }\n  }, [delivery, currentLocation, calculateRouteDetails]);\n  var handleBid = function () {\n    var _ref6 = _asyncToGenerator(function* () {\n      if (!isConnected && !isOfflineMode) {\n        setError(\"Vous êtes hors ligne. Activez le mode hors ligne pour enchérir.\");\n        setVisible(true);\n        return;\n      }\n      if (!bidAmount || isNaN(Number(bidAmount)) || Number(bidAmount) <= 0) {\n        setError(\"Veuillez entrer un montant valide\");\n        setVisible(true);\n        return;\n      }\n      var amount = Number(bidAmount);\n      if (delivery && amount > delivery.proposed_price) {\n        Alert.alert(\"Montant élevé\", \"Votre enchère est supérieure au prix proposé par le client. Êtes-vous sûr de vouloir continuer ?\", [{\n          text: \"Annuler\",\n          style: \"cancel\"\n        }, {\n          text: \"Continuer\",\n          onPress: function onPress() {\n            return submitBid(amount);\n          }\n        }]);\n        return;\n      }\n      if (delivery && amount < delivery.proposed_price * 0.5) {\n        Alert.alert(\"Montant bas\", \"Votre enchère est très basse. Le client pourrait ne pas l'accepter. Êtes-vous sûr de vouloir continuer ?\", [{\n          text: \"Annuler\",\n          style: \"cancel\"\n        }, {\n          text: \"Continuer\",\n          onPress: function onPress() {\n            return submitBid(amount);\n          }\n        }]);\n        return;\n      }\n      submitBid(amount);\n    });\n    return function handleBid() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  var submitBid = function () {\n    var _ref7 = _asyncToGenerator(function* (amount) {\n      setBidLoading(true);\n      try {\n        if (isOfflineMode && !isConnected) {\n          addPendingUpload({\n            type: \"bid\",\n            retries: 0,\n            data: {\n              delivery_id: Number(deliveryId),\n              proposed_price: amount,\n              estimated_duration: estimatedTime || undefined\n            }\n          });\n          Alert.alert(\"Enchère enregistrée\", \"Votre enchère a été enregistrée et sera soumise lorsque vous serez en ligne.\", [{\n            text: \"OK\",\n            onPress: function onPress() {\n              return navigation.goBack();\n            }\n          }]);\n        } else {\n          yield placeBid(Number(deliveryId), {\n            proposed_price: amount,\n            estimated_duration: estimatedTime || undefined\n          });\n          Alert.alert(\"Enchère soumise\", \"Votre enchère a été soumise avec succès. Vous serez notifié si le client l'accepte.\", [{\n            text: \"OK\",\n            onPress: function onPress() {\n              return navigation.goBack();\n            }\n          }]);\n        }\n      } catch (error) {\n        setError(error instanceof Error ? error.message : \"Erreur lors de la soumission de l'enchère\");\n        setVisible(true);\n      } finally {\n        setBidLoading(false);\n      }\n    });\n    return function submitBid(_x) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n  if (loading || !delivery) {\n    return _jsxs(SafeAreaView, {\n      style: styles.container,\n      children: [_jsxs(View, {\n        style: styles.header,\n        children: [_jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return navigation.goBack();\n          },\n          children: _jsx(Feather, {\n            name: \"arrow-left\",\n            size: 24,\n            color: \"#212121\"\n          })\n        }), _jsx(Text, {\n          style: styles.headerTitle,\n          children: \"Chargement...\"\n        }), _jsx(View, {\n          style: {\n            width: 24\n          }\n        })]\n      }), _jsx(View, {\n        style: styles.loadingContainer,\n        children: _jsx(Text, {\n          children: \"Chargement des d\\xE9tails de la livraison...\"\n        })\n      })]\n    });\n  }\n  return _jsxs(SafeAreaView, {\n    style: styles.container,\n    children: [_jsxs(View, {\n      style: styles.header,\n      children: [_jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return navigation.goBack();\n        },\n        children: _jsx(Feather, {\n          name: \"arrow-left\",\n          size: 24,\n          color: \"#212121\"\n        })\n      }), _jsx(Text, {\n        style: styles.headerTitle,\n        children: \"Ench\\xE9rir\"\n      }), _jsx(View, {\n        style: {\n          width: 24\n        }\n      })]\n    }), _jsxs(ScrollView, {\n      contentContainerStyle: styles.scrollContainer,\n      children: [_jsx(Card, {\n        style: styles.deliveryCard,\n        children: _jsxs(Card.Content, {\n          children: [_jsxs(View, {\n            style: styles.deliveryHeader,\n            children: [_jsxs(View, {\n              children: [_jsxs(Text, {\n                style: styles.deliveryId,\n                children: [\"Livraison #\", delivery.id]\n              }), _jsx(Text, {\n                style: styles.deliveryDate,\n                children: formatDate(delivery.created_at)\n              })]\n            }), _jsxs(Text, {\n              style: styles.deliveryPrice,\n              children: [formatPrice(delivery.final_price || 0), \" FCFA\"]\n            })]\n          }), _jsx(Divider, {\n            style: styles.divider\n          }), _jsxs(View, {\n            style: styles.addressContainer,\n            children: [_jsxs(View, {\n              style: styles.addressRow,\n              children: [_jsx(View, {\n                style: styles.addressDot\n              }), _jsxs(View, {\n                style: styles.addressTextContainer,\n                children: [_jsx(Text, {\n                  style: styles.addressLabel,\n                  children: \"Ramassage\"\n                }), _jsx(Text, {\n                  style: styles.addressText,\n                  children: delivery.pickup_address\n                }), _jsx(Text, {\n                  style: styles.communeText,\n                  children: delivery.pickup_location\n                })]\n              })]\n            }), _jsx(View, {\n              style: styles.addressLine\n            }), _jsxs(View, {\n              style: styles.addressRow,\n              children: [_jsx(View, {\n                style: [styles.addressDot, styles.destinationDot]\n              }), _jsxs(View, {\n                style: styles.addressTextContainer,\n                children: [_jsx(Text, {\n                  style: styles.addressLabel,\n                  children: \"Livraison\"\n                }), _jsx(Text, {\n                  style: styles.addressText,\n                  children: delivery.delivery_address\n                }), _jsx(Text, {\n                  style: styles.communeText,\n                  children: delivery.delivery_location\n                })]\n              })]\n            })]\n          }), delivery.notes && _jsxs(View, {\n            style: styles.descriptionContainer,\n            children: [_jsx(Text, {\n              style: styles.descriptionLabel,\n              children: \"Description :\"\n            }), _jsx(Text, {\n              style: styles.descriptionText,\n              children: delivery.notes\n            })]\n          })]\n        })\n      }), currentLocation && delivery.pickup_lat && delivery.pickup_lng && _jsxs(View, {\n        style: styles.mapContainer,\n        children: [_jsxs(MapView, {\n          style: styles.map,\n          initialRegion: {\n            latitude: (currentLocation.coords.latitude + delivery.pickup_lat) / 2,\n            longitude: (currentLocation.coords.longitude + delivery.pickup_lng) / 2,\n            latitudeDelta: Math.abs(currentLocation.coords.latitude - delivery.pickup_lat) * 2.5,\n            longitudeDelta: Math.abs(currentLocation.coords.longitude - delivery.pickup_lng) * 2.5\n          },\n          children: [_jsx(Marker, {\n            coordinate: {\n              latitude: currentLocation.coords.latitude,\n              longitude: currentLocation.coords.longitude\n            },\n            title: \"Votre position\",\n            pinColor: \"#4285F4\"\n          }), _jsx(Marker, {\n            coordinate: {\n              latitude: delivery.pickup_lat,\n              longitude: delivery.pickup_lng\n            },\n            title: \"Point de ramassage\",\n            pinColor: \"#FF6B00\"\n          }), delivery.delivery_lat && delivery.delivery_lng && _jsx(Marker, {\n            coordinate: {\n              latitude: delivery.delivery_lat,\n              longitude: delivery.delivery_lng\n            },\n            title: \"Point de livraison\",\n            pinColor: \"#4CAF50\"\n          }), routeCoordinates.length > 0 && _jsx(Polyline, {\n            coordinates: routeCoordinates,\n            strokeWidth: 3,\n            strokeColor: \"#4285F4\"\n          })]\n        }), distance && estimatedTime && _jsxs(View, {\n          style: styles.routeInfoContainer,\n          children: [_jsxs(View, {\n            style: styles.routeInfoItem,\n            children: [_jsx(Feather, {\n              name: \"map\",\n              size: 16,\n              color: \"#FF6B00\"\n            }), _jsxs(Text, {\n              style: styles.routeInfoText,\n              children: [distance, \" km\"]\n            })]\n          }), _jsxs(View, {\n            style: styles.routeInfoItem,\n            children: [_jsx(Feather, {\n              name: \"clock\",\n              size: 16,\n              color: \"#FF6B00\"\n            }), _jsxs(Text, {\n              style: styles.routeInfoText,\n              children: [estimatedTime, \" min\"]\n            })]\n          })]\n        })]\n      }), _jsxs(View, {\n        style: styles.bidContainer,\n        children: [_jsx(Text, {\n          style: styles.bidTitle,\n          children: \"Votre ench\\xE8re\"\n        }), _jsx(TextInput, {\n          label: \"Montant (FCFA)\",\n          value: bidAmount,\n          onChangeText: setBidAmount,\n          keyboardType: \"numeric\",\n          style: styles.bidInput,\n          mode: \"outlined\",\n          left: _jsx(TextInput.Icon, {\n            icon: \"cash\"\n          })\n        }), _jsx(Text, {\n          style: styles.bidTip,\n          children: \"Conseil : Proposez un prix comp\\xE9titif pour augmenter vos chances d'\\xEAtre s\\xE9lectionn\\xE9.\"\n        }), _jsx(Button, {\n          mode: \"contained\",\n          onPress: handleBid,\n          style: styles.bidButton,\n          loading: bidLoading,\n          disabled: bidLoading,\n          children: \"Soumettre l'ench\\xE8re\"\n        })]\n      })]\n    }), _jsx(Snackbar, {\n      visible: visible,\n      onDismiss: function onDismiss() {\n        return setVisible(false);\n      },\n      duration: 3000,\n      action: {\n        label: \"OK\",\n        onPress: function onPress() {\n          return setVisible(false);\n        }\n      },\n      children: error\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#FFFFFF\"\n  },\n  header: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: \"#EEEEEE\"\n  },\n  headerTitle: {\n    fontSize: 18,\n    fontWeight: \"bold\",\n    color: \"#212121\"\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  scrollContainer: {\n    padding: 16\n  },\n  deliveryCard: {\n    marginBottom: 16,\n    elevation: 2\n  },\n  deliveryHeader: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"flex-start\"\n  },\n  deliveryId: {\n    fontSize: 16,\n    fontWeight: \"bold\",\n    color: \"#212121\"\n  },\n  deliveryDate: {\n    fontSize: 12,\n    color: \"#757575\",\n    marginTop: 2\n  },\n  deliveryPrice: {\n    fontSize: 16,\n    fontWeight: \"bold\",\n    color: \"#FF6B00\"\n  },\n  divider: {\n    marginVertical: 12\n  },\n  addressContainer: {\n    marginBottom: 12\n  },\n  addressRow: {\n    flexDirection: \"row\",\n    alignItems: \"flex-start\",\n    marginBottom: 8\n  },\n  addressDot: {\n    width: 12,\n    height: 12,\n    borderRadius: 6,\n    backgroundColor: \"#FF6B00\",\n    marginTop: 4,\n    marginRight: 8\n  },\n  destinationDot: {\n    backgroundColor: \"#4CAF50\"\n  },\n  addressLine: {\n    width: 2,\n    height: 20,\n    backgroundColor: \"#E0E0E0\",\n    marginLeft: 5,\n    marginBottom: 8\n  },\n  addressTextContainer: {\n    flex: 1\n  },\n  addressLabel: {\n    fontSize: 12,\n    color: \"#757575\",\n    marginBottom: 2\n  },\n  addressText: {\n    fontSize: 14,\n    color: \"#212121\"\n  },\n  communeText: {\n    fontSize: 12,\n    color: \"#757575\",\n    marginTop: 2\n  },\n  descriptionContainer: {\n    marginTop: 12,\n    padding: 12,\n    backgroundColor: \"#F5F5F5\",\n    borderRadius: 8\n  },\n  descriptionLabel: {\n    fontSize: 14,\n    fontWeight: \"bold\",\n    color: \"#212121\",\n    marginBottom: 4\n  },\n  descriptionText: {\n    fontSize: 14,\n    color: \"#212121\"\n  },\n  mapContainer: {\n    height: 250,\n    borderRadius: 8,\n    overflow: \"hidden\",\n    marginBottom: 16\n  },\n  map: _objectSpread({}, StyleSheet.absoluteFillObject),\n  routeInfoContainer: {\n    position: \"absolute\",\n    bottom: 10,\n    left: 10,\n    right: 10,\n    flexDirection: \"row\",\n    justifyContent: \"space-around\",\n    backgroundColor: \"rgba(255, 255, 255, 0.9)\",\n    borderRadius: 8,\n    padding: 8\n  },\n  routeInfoItem: {\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  routeInfoText: {\n    marginLeft: 4,\n    fontWeight: \"bold\",\n    color: \"#212121\"\n  },\n  bidContainer: {\n    padding: 16,\n    backgroundColor: \"#F5F5F5\",\n    borderRadius: 8,\n    marginBottom: 20\n  },\n  bidTitle: {\n    fontSize: 18,\n    fontWeight: \"bold\",\n    color: \"#212121\",\n    marginBottom: 16\n  },\n  bidInput: {\n    marginBottom: 12,\n    backgroundColor: \"#FFFFFF\"\n  },\n  bidTip: {\n    fontSize: 12,\n    color: \"#757575\",\n    fontStyle: \"italic\",\n    marginBottom: 16\n  },\n  bidButton: {\n    backgroundColor: \"#FF6B00\"\n  }\n});\nexport default BidScreen;","map":{"version":3,"names":["_defineProperty","_asyncToGenerator","_slicedToArray","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","useState","useEffect","useCallback","View","StyleSheet","ScrollView","TouchableOpacity","Alert","Text","TextInput","Button","Card","Divider","Snackbar","SafeAreaView","Feather","MapView","Marker","Polyline","Location","useNetwork","useDelivery","formatPrice","formatDate","jsx","_jsx","jsxs","_jsxs","BidScreen","_ref","route","navigation","deliveryId","params","_useNetwork","isConnected","isOfflineMode","addPendingUpload","_useDelivery","getDeliveryDetails","placeBid","_useState","_useState2","delivery","setDelivery","_useState3","_useState4","bidAmount","setBidAmount","_useState5","_useState6","loading","setLoading","_useState7","_useState8","bidLoading","setBidLoading","_useState9","_useState0","error","setError","_useState1","_useState10","visible","setVisible","_useState11","_useState12","currentLocation","setCurrentLocation","_useState13","_useState14","distance","setDistance","_useState15","_useState16","estimatedTime","setEstimatedTime","_useState17","_useState18","routeCoordinates","setRouteCoordinates","deg2rad","deg","Math","PI","calculateDistance","lat1","lon1","lat2","lon2","R","dLat","dLon","a","sin","cos","c","atan2","sqrt","round","generateSimulatedRoute","start","end","points","steps","i","fraction","jitter","random","latitude","longitude","calculateRouteDetails","pickup_lat","pickup_lng","coords","timeInMinutes","simulatedRoute","console","loadDeliveryDetails","data","toString","_ref4","_data$actual_price","defaultBid","actual_price","price","getCurrentLocation","_yield$Location$reque","requestForegroundPermissionsAsync","status","location","getCurrentPositionAsync","handleBid","_ref6","isNaN","Number","amount","proposed_price","alert","text","style","onPress","submitBid","_ref7","type","retries","delivery_id","estimated_duration","undefined","goBack","Error","message","_x","styles","container","children","header","name","size","color","headerTitle","width","loadingContainer","contentContainerStyle","scrollContainer","deliveryCard","Content","deliveryHeader","id","deliveryDate","created_at","deliveryPrice","final_price","divider","addressContainer","addressRow","addressDot","addressTextContainer","addressLabel","addressText","pickup_address","communeText","pickup_location","addressLine","destinationDot","delivery_address","delivery_location","notes","descriptionContainer","descriptionLabel","descriptionText","mapContainer","map","initialRegion","latitudeDelta","abs","longitudeDelta","coordinate","title","pinColor","delivery_lat","delivery_lng","coordinates","strokeWidth","strokeColor","routeInfoContainer","routeInfoItem","routeInfoText","bidContainer","bidTitle","label","value","onChangeText","keyboardType","bidInput","mode","left","Icon","icon","bidTip","bidButton","disabled","onDismiss","duration","action","create","flex","backgroundColor","flexDirection","justifyContent","alignItems","padding","borderBottomWidth","borderBottomColor","fontSize","fontWeight","marginBottom","elevation","marginTop","marginVertical","height","borderRadius","marginRight","marginLeft","overflow","absoluteFillObject","position","bottom","right","fontStyle"],"sources":["/home/runner/workspace/mobile/screens/courier/BidScreen.tsx"],"sourcesContent":["/* eslint-disable react/no-unescaped-entities */\n\"use client\"\n\nimport type React from \"react\"\nimport { useState, useEffect, useCallback } from \"react\"\nimport { View, StyleSheet, ScrollView, TouchableOpacity, Alert } from \"react-native\"\nimport { Text, TextInput, Button, Card, Divider, Snackbar } from \"react-native-paper\"\nimport { SafeAreaView } from \"react-native-safe-area-context\"\nimport { Feather } from \"@expo/vector-icons\"\nimport MapView, { Marker, Polyline } from \"react-native-maps\"\nimport * as Location from \"expo-location\"\nimport { useNetwork } from \"../../contexts/NetworkContext\"\nimport { useDelivery } from \"../../hooks\"\nimport { formatPrice, formatDate } from \"../../utils/formatters\"\nimport type { NativeStackNavigationProp } from \"@react-navigation/native-stack\"\nimport type { RouteProp } from \"@react-navigation/native\"\nimport type { RootStackParamList } from \"../../types/navigation\"\nimport type { Delivery } from \"../../types/models\"\n\ntype BidScreenProps = {\n  route: RouteProp<RootStackParamList, \"Bid\">\n  navigation: NativeStackNavigationProp<RootStackParamList, \"Bid\">\n}\n\ninterface RouteCoordinate {\n  latitude: number\n  longitude: number\n}\n\nconst BidScreen: React.FC<BidScreenProps> = ({ route, navigation }) => {\n  const { deliveryId } = route.params\n  const { isConnected, isOfflineMode, addPendingUpload } = useNetwork()\n  const { getDeliveryDetails, placeBid } = useDelivery()\n\n  const [delivery, setDelivery] = useState<Delivery | null>(null)\n  const [bidAmount, setBidAmount] = useState<string>(\"\")\n  const [loading, setLoading] = useState<boolean>(true)\n  const [bidLoading, setBidLoading] = useState<boolean>(false)\n  const [error, setError] = useState<string>(\"\")\n  const [visible, setVisible] = useState<boolean>(false)\n  const [currentLocation, setCurrentLocation] = useState<Location.LocationObject | null>(null)\n  const [distance, setDistance] = useState<number | null>(null)\n  const [estimatedTime, setEstimatedTime] = useState<number | null>(null)\n  const [routeCoordinates, setRouteCoordinates] = useState<RouteCoordinate[]>([])\n\n  // Helper functions first\n  const deg2rad = useCallback((deg: number): number => {\n    return deg * (Math.PI / 180)\n  }, [])\n\n  const calculateDistance = useCallback((lat1: number, lon1: number, lat2: number, lon2: number): number => {\n    const R = 6371 // Rayon de la Terre en km\n    const dLat = deg2rad(lat2 - lat1)\n    const dLon = deg2rad(lon2 - lon1)\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2)\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))\n    const distance = R * c // Distance en km\n    return Math.round(distance * 10) / 10 // Arrondir à 1 décimale\n  }, [deg2rad])\n\n  const generateSimulatedRoute = useCallback((\n    start: { latitude: number; longitude: number },\n    end: { latitude: number; longitude: number },\n  ): RouteCoordinate[] => {\n    // Générer quelques points intermédiaires pour simuler une route\n    const points: RouteCoordinate[] = []\n    const steps = 5\n\n    for (let i = 0; i <= steps; i++) {\n      const fraction = i / steps\n\n      // Ajouter un peu de variation aléatoire pour simuler une route réelle\n      const jitter = i > 0 && i < steps ? (Math.random() - 0.5) * 0.005 : 0\n\n      points.push({\n        latitude: start.latitude + (end.latitude - start.latitude) * fraction + jitter,\n        longitude: start.longitude + (end.longitude - start.longitude) * fraction + jitter,\n      })\n    }\n\n    return points\n  }, [])\n\n  const calculateRouteDetails = useCallback(async (): Promise<void> => {\n    if (!delivery?.pickup_lat || !delivery?.pickup_lng || !currentLocation) return\n\n    try {\n      // Dans une application réelle, vous utiliseriez un service comme Google Directions API\n      // Pour simplifier, nous simulons un calcul de distance et de temps\n\n      // Calculer la distance à vol d'oiseau\n      const distance = calculateDistance(\n        currentLocation.coords.latitude,\n        currentLocation.coords.longitude,\n        delivery.pickup_lat,\n        delivery.pickup_lng,\n      )\n\n      setDistance(distance)\n\n      // Estimer le temps (1 km = environ 3 minutes en moto à Abidjan avec trafic)\n      const timeInMinutes = Math.round(distance * 3)\n      setEstimatedTime(timeInMinutes)\n\n      // Simuler des coordonnées de route\n      const simulatedRoute = generateSimulatedRoute(\n        { latitude: currentLocation.coords.latitude, longitude: currentLocation.coords.longitude },\n        { latitude: delivery.pickup_lat, longitude: delivery.pickup_lng },\n      )\n\n      setRouteCoordinates(simulatedRoute)\n    } catch (error) {\n      console.error(\"Error calculating route:\", error)\n    }\n  }, [delivery, currentLocation, calculateDistance, generateSimulatedRoute])\n\n  const loadDeliveryDetails = useCallback(async (): Promise<void> => {\n    try {\n      setLoading(true)\n      const data = await getDeliveryDetails(deliveryId.toString())\n      setDelivery(data)\n\n      // Définir un montant d'enchère par défaut légèrement inférieur au prix proposé\n      if (data) {\n        const defaultBid = Math.round(((data.actual_price ?? data.price ?? 0) * 0.9))\n        setBidAmount(defaultBid.toString())\n      }\n    } catch (error) {\n      setError(\"Erreur lors du chargement des détails de la livraison\")\n      setVisible(true)\n    } finally {\n      setLoading(false)\n    }\n  }, [deliveryId, getDeliveryDetails])\n\n  const getCurrentLocation = useCallback(async (): Promise<void> => {\n    try {\n      const { status } = await Location.requestForegroundPermissionsAsync()\n      if (status !== \"granted\") {\n        setError(\"Permission to access location was denied\")\n        return\n      }\n\n      const location = await Location.getCurrentPositionAsync({})\n      setCurrentLocation(location)\n    } catch (error) {\n      console.error(\"Error getting current location:\", error)\n    }\n  }, [])\n\n  useEffect(() => {\n    loadDeliveryDetails()\n    getCurrentLocation()\n  }, [loadDeliveryDetails, getCurrentLocation])\n\n  useEffect(() => {\n    if (delivery && currentLocation) {\n      calculateRouteDetails()\n    }\n  }, [delivery, currentLocation, calculateRouteDetails])\n\n  const handleBid = async (): Promise<void> => {\n    if (!isConnected && !isOfflineMode) {\n      setError(\"Vous êtes hors ligne. Activez le mode hors ligne pour enchérir.\")\n      setVisible(true)\n      return\n    }\n\n    if (!bidAmount || isNaN(Number(bidAmount)) || Number(bidAmount) <= 0) {\n      setError(\"Veuillez entrer un montant valide\")\n      setVisible(true)\n      return\n    }\n\n    const amount = Number(bidAmount)\n\n    // Vérifier que le montant est raisonnable\n    if (delivery && amount > delivery.proposed_price) {\n      Alert.alert(\n        \"Montant élevé\",\n        \"Votre enchère est supérieure au prix proposé par le client. Êtes-vous sûr de vouloir continuer ?\",\n        [\n          { text: \"Annuler\", style: \"cancel\" },\n          { text: \"Continuer\", onPress: () => submitBid(amount) },\n        ],\n      )\n      return\n    }\n\n    if (delivery && amount < delivery.proposed_price * 0.5) {\n      Alert.alert(\n        \"Montant bas\",\n        \"Votre enchère est très basse. Le client pourrait ne pas l'accepter. Êtes-vous sûr de vouloir continuer ?\",\n        [\n          { text: \"Annuler\", style: \"cancel\" },\n          { text: \"Continuer\", onPress: () => submitBid(amount) },\n        ],\n      )\n      return\n    }\n\n    submitBid(amount)\n  }\n\n  const submitBid = async (amount: number): Promise<void> => {\n    setBidLoading(true)\n\n    try {\n      if (isOfflineMode && !isConnected) {\n        // Sauvegarder l'enchère pour synchronisation ultérieure\n        addPendingUpload({\n          type: \"bid\",\n          retries: 0,\n          data: {\n            delivery_id: Number(deliveryId),\n            proposed_price: amount,\n            estimated_duration: estimatedTime || undefined\n          },\n        })\n\n        Alert.alert(\n          \"Enchère enregistrée\",\n          \"Votre enchère a été enregistrée et sera soumise lorsque vous serez en ligne.\",\n          [{ text: \"OK\", onPress: () => navigation.goBack() }],\n        )\n      } else {\n        // Soumettre l'enchère immédiatement\n        await placeBid(Number(deliveryId), {\n          proposed_price: amount,\n          estimated_duration: estimatedTime || undefined\n        })\n\n        Alert.alert(\n          \"Enchère soumise\",\n          \"Votre enchère a été soumise avec succès. Vous serez notifié si le client l'accepte.\",\n          [{ text: \"OK\", onPress: () => navigation.goBack() }],\n        )\n      }\n    } catch (error) {\n      setError(error instanceof Error ? error.message : \"Erreur lors de la soumission de l'enchère\")\n      setVisible(true)\n    } finally {\n      setBidLoading(false)\n    }\n  }\n\n  if (loading || !delivery) {\n    return (\n      <SafeAreaView style={styles.container}>\n        <View style={styles.header}>\n          <TouchableOpacity onPress={() => navigation.goBack()}>\n            <Feather name=\"arrow-left\" size={24} color=\"#212121\" />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Chargement...</Text>\n          <View style={{ width: 24 }} />\n        </View>\n        <View style={styles.loadingContainer}>\n          <Text>Chargement des détails de la livraison...</Text>\n        </View>\n      </SafeAreaView>\n    )\n  }\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <TouchableOpacity onPress={() => navigation.goBack()}>\n          <Feather name=\"arrow-left\" size={24} color=\"#212121\" />\n        </TouchableOpacity>\n        <Text style={styles.headerTitle}>Enchérir</Text>\n        <View style={{ width: 24 }} />\n      </View>\n\n      <ScrollView contentContainerStyle={styles.scrollContainer}>\n        <Card style={styles.deliveryCard}>\n          <Card.Content>\n            <View style={styles.deliveryHeader}>\n              <View>\n                <Text style={styles.deliveryId}>Livraison #{delivery.id}</Text>\n                <Text style={styles.deliveryDate}>{formatDate(delivery.created_at)}</Text>\n              </View>\n              <Text style={styles.deliveryPrice}>{formatPrice(delivery.final_price || 0)} FCFA</Text>\n            </View>\n\n            <Divider style={styles.divider} />\n\n            <View style={styles.addressContainer}>\n              <View style={styles.addressRow}>\n                <View style={styles.addressDot} />\n                <View style={styles.addressTextContainer}>\n                  <Text style={styles.addressLabel}>Ramassage</Text>\n                  <Text style={styles.addressText}>{delivery.pickup_address}</Text>\n                  <Text style={styles.communeText}>{delivery.pickup_location}</Text>\n                </View>\n              </View>\n\n              <View style={styles.addressLine} />\n\n              <View style={styles.addressRow}>\n                <View style={[styles.addressDot, styles.destinationDot]} />\n                <View style={styles.addressTextContainer}>\n                  <Text style={styles.addressLabel}>Livraison</Text>\n                  <Text style={styles.addressText}>{delivery.delivery_address}</Text>\n                  <Text style={styles.communeText}>{delivery.delivery_location}</Text>\n                </View>\n              </View>\n            </View>\n\n            {delivery.notes && (\n              <View style={styles.descriptionContainer}>\n                <Text style={styles.descriptionLabel}>Description :</Text>\n                <Text style={styles.descriptionText}>{delivery.notes}</Text>\n              </View>\n            )}\n          </Card.Content>\n        </Card>\n\n        {currentLocation && delivery.pickup_lat && delivery.pickup_lng && (\n          <View style={styles.mapContainer}>\n            <MapView\n              style={styles.map}\n              initialRegion={{\n                latitude: (currentLocation.coords.latitude + delivery.pickup_lat) / 2,\n                longitude: (currentLocation.coords.longitude + delivery.pickup_lng) / 2,\n                latitudeDelta: Math.abs(currentLocation.coords.latitude - delivery.pickup_lat) * 2.5,\n                longitudeDelta: Math.abs(currentLocation.coords.longitude - delivery.pickup_lng) * 2.5,\n              }}\n            >\n              <Marker\n                coordinate={{\n                  latitude: currentLocation.coords.latitude,\n                  longitude: currentLocation.coords.longitude,\n                }}\n                title=\"Votre position\"\n                pinColor=\"#4285F4\"\n              />\n\n              <Marker\n                coordinate={{\n                  latitude: delivery.pickup_lat,\n                  longitude: delivery.pickup_lng,\n                }}\n                title=\"Point de ramassage\"\n                pinColor=\"#FF6B00\"\n              />\n\n              {delivery.delivery_lat && delivery.delivery_lng && (\n                <Marker\n                  coordinate={{\n                    latitude: delivery.delivery_lat,\n                    longitude: delivery.delivery_lng,\n                  }}\n                  title=\"Point de livraison\"\n                  pinColor=\"#4CAF50\"\n                />\n              )}\n\n              {routeCoordinates.length > 0 && (\n                <Polyline coordinates={routeCoordinates} strokeWidth={3} strokeColor=\"#4285F4\" />\n              )}\n            </MapView>\n\n            {distance && estimatedTime && (\n              <View style={styles.routeInfoContainer}>\n                <View style={styles.routeInfoItem}>\n                  <Feather name=\"map\" size={16} color=\"#FF6B00\" />\n                  <Text style={styles.routeInfoText}>{distance} km</Text>\n                </View>\n                <View style={styles.routeInfoItem}>\n                  <Feather name=\"clock\" size={16} color=\"#FF6B00\" />\n                  <Text style={styles.routeInfoText}>{estimatedTime} min</Text>\n                </View>\n              </View>\n            )}\n          </View>\n        )}\n\n        <View style={styles.bidContainer}>\n          <Text style={styles.bidTitle}>Votre enchère</Text>\n\n          <TextInput\n            label=\"Montant (FCFA)\"\n            value={bidAmount}\n            onChangeText={setBidAmount}\n            keyboardType=\"numeric\"\n            style={styles.bidInput}\n            mode=\"outlined\"\n            left={<TextInput.Icon icon=\"cash\" />}\n          />\n\n          <Text style={styles.bidTip}>\n            Conseil : Proposez un prix compétitif pour augmenter vos chances d'être sélectionné.\n          </Text>\n\n          <Button\n            mode=\"contained\"\n            onPress={handleBid}\n            style={styles.bidButton}\n            loading={bidLoading}\n            disabled={bidLoading}\n          >\n            Soumettre l'enchère\n          </Button>\n        </View>\n      </ScrollView>\n\n      <Snackbar\n        visible={visible}\n        onDismiss={() => setVisible(false)}\n        duration={3000}\n        action={{\n          label: \"OK\",\n          onPress: () => setVisible(false),\n        }}\n      >\n        {error}\n      </Snackbar>\n    </SafeAreaView>\n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#FFFFFF\",\n  },\n  header: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: \"#EEEEEE\",\n  },\n  headerTitle: {\n    fontSize: 18,\n    fontWeight: \"bold\",\n    color: \"#212121\",\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  scrollContainer: {\n    padding: 16,\n  },\n  deliveryCard: {\n    marginBottom: 16,\n    elevation: 2,\n  },\n  deliveryHeader: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"flex-start\",\n  },\n  deliveryId: {\n    fontSize: 16,\n    fontWeight: \"bold\",\n    color: \"#212121\",\n  },\n  deliveryDate: {\n    fontSize: 12,\n    color: \"#757575\",\n    marginTop: 2,\n  },\n  deliveryPrice: {\n    fontSize: 16,\n    fontWeight: \"bold\",\n    color: \"#FF6B00\",\n  },\n  divider: {\n    marginVertical: 12,\n  },\n  addressContainer: {\n    marginBottom: 12,\n  },\n  addressRow: {\n    flexDirection: \"row\",\n    alignItems: \"flex-start\",\n    marginBottom: 8,\n  },\n  addressDot: {\n    width: 12,\n    height: 12,\n    borderRadius: 6,\n    backgroundColor: \"#FF6B00\",\n    marginTop: 4,\n    marginRight: 8,\n  },\n  destinationDot: {\n    backgroundColor: \"#4CAF50\",\n  },\n  addressLine: {\n    width: 2,\n    height: 20,\n    backgroundColor: \"#E0E0E0\",\n    marginLeft: 5,\n    marginBottom: 8,\n  },\n  addressTextContainer: {\n    flex: 1,\n  },\n  addressLabel: {\n    fontSize: 12,\n    color: \"#757575\",\n    marginBottom: 2,\n  },\n  addressText: {\n    fontSize: 14,\n    color: \"#212121\",\n  },\n  communeText: {\n    fontSize: 12,\n    color: \"#757575\",\n    marginTop: 2,\n  },\n  descriptionContainer: {\n    marginTop: 12,\n    padding: 12,\n    backgroundColor: \"#F5F5F5\",\n    borderRadius: 8,\n  },\n  descriptionLabel: {\n    fontSize: 14,\n    fontWeight: \"bold\",\n    color: \"#212121\",\n    marginBottom: 4,\n  },\n  descriptionText: {\n    fontSize: 14,\n    color: \"#212121\",\n  },\n  mapContainer: {\n    height: 250,\n    borderRadius: 8,\n    overflow: \"hidden\",\n    marginBottom: 16,\n  },\n  map: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  routeInfoContainer: {\n    position: \"absolute\",\n    bottom: 10,\n    left: 10,\n    right: 10,\n    flexDirection: \"row\",\n    justifyContent: \"space-around\",\n    backgroundColor: \"rgba(255, 255, 255, 0.9)\",\n    borderRadius: 8,\n    padding: 8,\n  },\n  routeInfoItem: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  routeInfoText: {\n    marginLeft: 4,\n    fontWeight: \"bold\",\n    color: \"#212121\",\n  },\n  bidContainer: {\n    padding: 16,\n    backgroundColor: \"#F5F5F5\",\n    borderRadius: 8,\n    marginBottom: 20,\n  },\n  bidTitle: {\n    fontSize: 18,\n    fontWeight: \"bold\",\n    color: \"#212121\",\n    marginBottom: 16,\n  },\n  bidInput: {\n    marginBottom: 12,\n    backgroundColor: \"#FFFFFF\",\n  },\n  bidTip: {\n    fontSize: 12,\n    color: \"#757575\",\n    fontStyle: \"italic\",\n    marginBottom: 16,\n  },\n  bidButton: {\n    backgroundColor: \"#FF6B00\",\n  },\n})\n\nexport default BidScreen"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}